<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- iOS Safari -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <!-- Chrome, Firefox OS and Opera Status Bar Color -->
  <meta name="theme-color" content="#FFFFFF">
  <meta property="og:title" content="Zynq7000ç§æœ‰å®šæ—¶å™¨ä½¿ç”¨æ‘˜è¦">
    <meta name="description" content="ç®€è¦ä»‹ç»ZYNQçš„ç§æœ‰å®šæ—¶ä¸­æ–­çš„ä½¿ç”¨ï¼Œåœ¨ZYNQçš„çº¯PSé‡Œå®ç°ç§æœ‰å®šæ—¶å™¨ä¸­æ–­ã€‚æ¯éš”ä¸€ç§’é’Ÿä¸­æ–­ä¸€æ¬¡ï¼Œåœ¨ä¸­æ–­å‡½æ•°é‡Œè®¡æ•°åŠ 1ï¼Œé€šè¿‡ä¸²å£æ‰“å°è¾“å‡º...">
  <meta property="og:description" content="ç®€è¦ä»‹ç»ZYNQçš„ç§æœ‰å®šæ—¶ä¸­æ–­çš„ä½¿ç”¨ï¼Œåœ¨ZYNQçš„çº¯PSé‡Œå®ç°ç§æœ‰å®šæ—¶å™¨ä¸­æ–­ã€‚æ¯éš”ä¸€ç§’é’Ÿä¸­æ–­ä¸€æ¬¡ï¼Œåœ¨ä¸­æ–­å‡½æ•°é‡Œè®¡æ•°åŠ 1ï¼Œé€šè¿‡ä¸²å£æ‰“å°è¾“å‡º...">
    <meta property="og:type" content="blog">
  <title>Zynq7000ç§æœ‰å®šæ—¶å™¨ä½¿ç”¨æ‘˜è¦</title>
  <!-- Favicon -->
    <link rel="shortcut icon" href="ğŸ¡">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
  <link rel="stylesheet" type="text/css"
    href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism-solarizedlight.min.css">
  <link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
  <link rel="stylesheet" type="text/css" href="css/notablog.css">
  <link rel="stylesheet" type="text/css" href="css/theme.css">
  <script src="https://cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src='https://unpkg.com/valine/dist/Valine.min.js'></script>
  <style>
    :root {
      font-size: 18px;
    }

    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
    <a href="index.html">
      <div class="Navbar__Btn"><span>ğŸ¡</span> <span>Home</span></div>
    </a>
                                                                                                                                                                                                                    <span class="Navbar__Delim">&centerdot;</span>
    <a href="links.html">
      <div class="Navbar__Btn"><span>ğŸ”—</span> <span>Links</span></div>
    </a>
                <span class="Navbar__Delim">&centerdot;</span>
    <a href="about.html">
      <div class="Navbar__Btn"><span>ğŸ‘¦ğŸ»</span> <span>About</span></div>
    </a>
                          </nav>
  <header class="Header">
        <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    <div>
            <span class="Header__Title">Zynq7000ç§æœ‰å®šæ—¶å™¨ä½¿ç”¨æ‘˜è¦</span>

    </div>
        <div class="DateTagBar">
            <span class="DateTagBar__Item DateTagBar__Date">Posted on Wed, Dec 4, 2019</span>
                  <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--gray">
        <a href="tag/Zynq.html">Zynq</a>
      </span>
          </div>
      </header>
  <article id="https://www.notion.so/cfba8f1aa636422e8b64333b3c4be746" class="PageRoot"><ul id="https://www.notion.so/e825209048cc4f9782d0275872324525" class="ColorfulBlock ColorfulBlock--ColorGray TableOfContents"><li class="TableOfContents__Item"><a href="#https://www.notion.so/958ed68167b14da5b054edde0e7e2f05"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">åˆå§‹åŒ–ç§æœ‰å®šæ—¶å™¨è®¾å¤‡å®ä¾‹</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/4cfd1e7fa46945b598adbf4f26095da8"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">è®¾ç½®å®šæ—¶å™¨ä¸­æ–­</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/c436fd57a5404196bfd54b6fa90bde71"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">1.åˆå§‹åŒ–GICä¸­æ–­æ§åˆ¶å™¨ï¼›</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/2a9abc6a9d354f1e949fb0fb2153650b"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">2.è®¾ç½®ä¸­æ–­å¼‚å¸¸</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/037b7aaca67d4ba0899bcb8c2c728167"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">3.ç»‘å®šä¸­æ–­æœåŠ¡å‡½æ•°</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/108493e763b542e3bcb4016736833007"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">4.ä½¿èƒ½ä¸­æ–­</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/e2847accdc904c85bb7f9e3364214224"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">å¯åŠ¨ç§æœ‰å®šæ—¶å™¨</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/a7deef14f35b46e6ba96b331d1058bc4"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">å®ä¾‹å‚è€ƒ</span></span></div></a></li></ul><div id="https://www.notion.so/e6b6598bb18f4b9f83a99918116981ae" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">å‚è€ƒæ–‡ç« ï¼š</span></span></p></div><div id="https://www.notion.so/db1500b1651b436ba2dc6db4496af00c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="http://xilinx.eetrend.com/blog/2019/100043515.html">å­¦ä¼šZynqï¼ˆ9ï¼‰å®šæ—¶å™¨ä½¿ç”¨ç¤ºä¾‹ï¼ˆPPIï¼‰</a></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://my.oschina.net/msxbo/blog/3099104">ç±³è”å®¢ ZYNQ/SOCç²¾å“æ•™ç¨‹ S02-CH08 å®šæ—¶å™¨ä¸­æ–­å®éªŒ</a></span></span></p></div><h2 id="https://www.notion.so/958ed68167b14da5b054edde0e7e2f05" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/958ed68167b14da5b054edde0e7e2f05"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">åˆå§‹åŒ–ç§æœ‰å®šæ—¶å™¨è®¾å¤‡å®ä¾‹</span></span></h2><pre id="https://www.notion.so/e38f588b402f4ec0b2694a82fa866427" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>XScuTimer_Config *XScuTimer_LookupConfig(u16 DeviceId);
</span></span></span></code></pre><div id="https://www.notion.so/87538625f7854b2cad6055c0e3041833" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">é€šè¿‡è®¾å¤‡IDæŸ¥æ‰¾è®¾å¤‡é…ç½®
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">DeviceId</code></span><span class="SemanticString">ï¼Œè®¾å¤‡ID
è¿”å›</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">XScuTimer_Config</code></span><span class="SemanticString">å‹æŒ‡é’ˆï¼ŒæŒ‡å‘é…ç½®è¡¨ä¸­å¯¹åº”è®¾å¤‡IDçš„é…ç½®ï¼Œè‹¥æœªæŸ¥æ‰¾åˆ°ç›¸åº”è®¾å¤‡è¿”å›NULLã€‚</span></span></p></div><pre id="https://www.notion.so/2f5cc9d032274820ae3289f15b211f1e" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>s32 XScuTimer_CfgInitialize(XScuTimer *InstancePtr,
			 XScuTimer_Config *ConfigPtr, u32 EffectiveAddress)
</span></span></span></code></pre><div id="https://www.notion.so/f3c6edf2df4a4d3b840fed2726f3d15d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">åˆå§‹åŒ–æŒ‡å®šçš„å®šæ—¶å™¨è®¾å¤‡ã€‚
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">InstancePtr</code></span><span class="SemanticString">ï¼ŒæŒ‡å‘</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">XScuTimer</code></span><span class="SemanticString">çš„ä¸€ä¸ªå®ä¾‹ã€‚
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ConfigPtr</code></span><span class="SemanticString">ï¼ŒæŒ‡å‘å®šæ—¶å™¨å®ä¾‹çš„é…ç½®ä¿¡æ¯ç»“æ„ä½“
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">EffectiveAddress</code></span><span class="SemanticString">ï¼Œè®¾å¤‡çš„èµ·å§‹åœ°å€ã€‚
è¿”å›åˆå§‹åŒ–çš„ç»“æœçŠ¶æ€ï¼Œåˆå§‹åŒ–æˆåŠŸä¸º</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">XST_SUCCESS</code></span><span class="SemanticString">æˆ–è€…å·²è¢«ä½¿ç”¨</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">XST_DEVICE_IS_STARTED</code></span><span class="SemanticString">ã€‚</span></span></p></div><pre id="https://www.notion.so/1bf47c1ff79b49cbbf9547e8006c4836" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>#define XScuTimer_LoadTimer(InstancePtr, Value)				\\
	XScuTimer_WriteReg((InstancePtr)-&gt;Config.BaseAddr,		\\
			XSCUTIMER_LOAD_OFFSET, (Value))
</span></span></span></code></pre><div id="https://www.notion.so/e708d6bcb01f4f43b94530aacfb7d81b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">åŠ è½½å®šæ—¶å™¨çš„è®¡æ•°å™¨ä¸­çš„å€¼ï¼Œå…¶æœ¬è´¨ä¸Šåªæ˜¯æ“ä½œTimer Loadå¯„å­˜å™¨ã€‚
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">InstancePtr</code></span><span class="SemanticString">ï¼ŒæŒ‡å‘</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">XScuTimer</code></span><span class="SemanticString">çš„ä¸€ä¸ªå®ä¾‹ã€‚
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Value</code></span><span class="SemanticString">ï¼Œè®¡æ•°çš„é¢„åŠ è½½å€¼ã€‚
ç§æœ‰å®šæ—¶å™¨æ˜¯ä»è£…è½½å€¼é€’å‡åˆ°0æ—¶å‘å‡ºä¸­æ–­ã€‚ç§æœ‰å®šæ—¶å™¨çš„å·¥ä½œæ—¶é’Ÿä¸º333MHzï¼Œæ¯1/333Mç§’å‡1ã€‚å› æ­¤è‹¥æƒ³å®šæ—¶1sï¼Œåˆ™è£…è½½å€¼ä¸º1/(1/333M)-1ï¼Œ</span></span></p></div><pre id="https://www.notion.so/0e852b8883c5421a8a598d22324602f6" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>#define XScuTimer_EnableAutoReload(InstancePtr)				\\
	XScuTimer_WriteReg((InstancePtr)-&gt;Config.BaseAddr,		\\
			XSCUTIMER_CONTROL_OFFSET,			\\
			(XScuTimer_ReadReg((InstancePtr)-&gt;Config.BaseAddr, \\
				XSCUTIMER_CONTROL_OFFSET) |		 \\
				XSCUTIMER_CONTROL_AUTO_RELOAD_MASK))
</span></span></span></code></pre><div id="https://www.notion.so/1bfa4cdf631148afb593a38d11016c98" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">å…è®¸æŒ‡å®šå®šæ—¶å™¨è®¾å¤‡å®ä¾‹èƒ½è‡ªåŠ¨é‡è½½ã€‚</span></span></p></div><h2 id="https://www.notion.so/4cfd1e7fa46945b598adbf4f26095da8" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/4cfd1e7fa46945b598adbf4f26095da8"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">è®¾ç½®å®šæ—¶å™¨ä¸­æ–­</span></span></h2><div id="https://www.notion.so/9a6a957244e440dab11869345dd28d0a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">ä¸­æ–­æ—¶åŸºæœ¬è¿‡ç¨‹ï¼šåˆå§‹åŒ–ä¸­æ–­æ§åˆ¶å™¨ã€è®¾ç½®ä¸­æ–­å¼‚å¸¸ã€è¿æ¥ä¸­æ–­ã€ä½¿èƒ½ä¸­æ–­ã€‚</span></span></p></div><h3 id="https://www.notion.so/c436fd57a5404196bfd54b6fa90bde71" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/c436fd57a5404196bfd54b6fa90bde71"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">1.åˆå§‹åŒ–GICä¸­æ–­æ§åˆ¶å™¨ï¼›</span></span></h3><pre id="https://www.notion.so/101e2e91eaba4849a2a4527a927b041f" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>XScuGic_Config *XScuGic_LookupConfig(u16 DeviceId);
</span></span></span></code></pre><div id="https://www.notion.so/11510af8335a45c5b6bb2c9d9b1aa959" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">é€šè¿‡è®¾å¤‡idæŸ¥æ‰¾è®¾å¤‡çš„é…ç½®
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">DeviceID</code></span><span class="SemanticString">ï¼Œè®¾å¤‡IDçš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚
è¿”å›</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">XScuGic_Config *</code></span><span class="SemanticString">å‹æŒ‡é’ˆï¼ŒæŒ‡å‘æŒ‡å®šè®¾å¤‡çš„é…ç½®ä¿¡æ¯ç»“æ„ä½“ä¸­ã€‚</span></span></p></div><pre id="https://www.notion.so/fb0d320ca47c4bd1b97e5fdd2a6eef37" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>s32  XScuGic_CfgInitialize(XScuGic *InstancePtr,
				XScuGic_Config *ConfigPtr,
				u32 EffectiveAddr);
</span></span></span></code></pre><div id="https://www.notion.so/9438a51e395943cd98718a54fba8269b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">å¯¹æŒ‡å®šçš„ä¸­æ–­æ§åˆ¶å™¨å®ä¾‹è¿›è¡Œåˆå§‹åŒ–ã€‚
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">InstancePtr</code></span><span class="SemanticString">æ˜¯æŒ‡å‘</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">XScuGic</code></span><span class="SemanticString">å®ä¾‹çš„æŒ‡é’ˆã€‚
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ConfigPtr</code></span><span class="SemanticString">æ˜¯æŒ‡å‘æ‰€å…³è”çš„ç‰¹å®šè®¾å¤‡çš„é…ç½®è¡¨çš„æŒ‡é’ˆã€‚
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">EffectiveAddr</code></span><span class="SemanticString">æ˜¯æ‰€å…³è”è®¾å¤‡çš„æœ‰æ•ˆåœ°å€ã€‚</span></span></p></div><h3 id="https://www.notion.so/2a9abc6a9d354f1e949fb0fb2153650b" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/2a9abc6a9d354f1e949fb0fb2153650b"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">2.è®¾ç½®ä¸­æ–­å¼‚å¸¸</span></span></h3><pre id="https://www.notion.so/0fe59e1794754beb97cfe73949f2c7b5" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>void Xil_ExceptionInit(void);
</span></span></span></code></pre><div id="https://www.notion.so/5293b81462194e5992d049b466258561" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">å¼‚å¸¸å¤„ç†ï¼Œåœ¨Coretex-A9ä¸­ä¸åšä»»ä½•äº‹ï¼Œå› ä¸ºå¼‚å¸¸å¤„ç†å·²è¢«é™æ€åˆå§‹åŒ–ã€‚</span></span></p></div><pre id="https://www.notion.so/2923d25109c544e9b2bdf47183bfb20f" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>void Xil_ExceptionRegisterHandler(u32 Exception_id,
				    Xil_ExceptionHandler Handler,
				    void *Data);
</span></span></span></code></pre><div id="https://www.notion.so/afa6f83431dc4423b237d4849f2c941f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">ä¸ºç‰¹å®šçš„å¼‚å¸¸æ³¨å†Œä¸€ä¸ªhandlerï¼Œå½“å¤„ç†å™¨å‘ç”Ÿç‰¹å®šå¼‚å¸¸åè°ƒç”¨å¯¹åº”handlerã€‚
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Exception_id</code></span><span class="SemanticString">å¼‚å¸¸æºçš„idã€‚
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Handler</code></span><span class="SemanticString">æ˜¯å¼‚å¸¸å¤„ç†å‡½æ•°ã€‚
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Data</code></span><span class="SemanticString">æ˜¯å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œä¼ ç»™å¯¹åº”handlerçš„å‚æ•°ã€‚</span></span></p></div><pre id="https://www.notion.so/80690165fce44365bca3173587a62faf" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>#define Xil_ExceptionEnable() \\
		Xil_ExceptionEnableMask(XIL_EXCEPTION_IRQ)
</span></span></span></code></pre><div id="https://www.notion.so/277cfca22d1b41bb9c1f47c651ad1c0f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">å…è®¸ä¸­æ–­çš„å¼‚å¸¸å¤„ç†ã€‚</span></span></p></div><h3 id="https://www.notion.so/037b7aaca67d4ba0899bcb8c2c728167" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/037b7aaca67d4ba0899bcb8c2c728167"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">3.ç»‘å®šä¸­æ–­æœåŠ¡å‡½æ•°</span></span></h3><pre id="https://www.notion.so/f3c5cd17758f43e9be55448c686654c7" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>s32  XScuGic_Connect(XScuGic *InstancePtr, u32 Int_Id,
                      Xil_InterruptHandler Handler, void *CallBackRef);
</span></span></span></code></pre><div id="https://www.notion.so/ea8aa1c3f7404c888b234abd3f72f1b7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">å°†æŒ‡å®šä¸­æ–­æœåŠ¡å‡½æ•°ç»‘å®šåˆ°æŒ‡å®šä¸­æ–­å·ä¸Šã€‚
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">InstancePtr</code></span><span class="SemanticString">æ˜¯æŒ‡å‘</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">XScuGic</code></span><span class="SemanticString">å®ä¾‹çš„æŒ‡é’ˆã€‚
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Int_Id</code></span><span class="SemanticString">æ˜¯ä¸­æ–­æºçš„ä¸­æ–­å·ã€‚
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Handler</code></span><span class="SemanticString">æ˜¯ä¸­æ–­å¤„ç†å‡½æ•°ã€‚
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">CallBackRef</code></span><span class="SemanticString">æ˜¯å›è°ƒçš„ä¸€ä¸ªå¼•ç”¨ï¼Œä¸€èˆ¬æ˜¯æ‰€è¿æ¥çš„è®¾å¤‡çš„æŒ‡é’ˆã€‚</span></span></p></div><h3 id="https://www.notion.so/108493e763b542e3bcb4016736833007" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/108493e763b542e3bcb4016736833007"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">4.ä½¿èƒ½ä¸­æ–­</span></span></h3><pre id="https://www.notion.so/60ad831759c04faa96c432ae8ac9a2b5" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>void XScuGic_Enable(XScuGic *InstancePtr, u32 Int_Id);
</span></span></span></code></pre><div id="https://www.notion.so/2fd7da7a1ca0410899c1d7f51fc6c589" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">ä¸­æ–­ä½¿èƒ½ï¼Œåœ¨è¯¥å‡½æ•°è°ƒç”¨åï¼Œå¯ä½¿å¯¹åº”idçš„pendingçš„ä¸­æ–­èƒ½å¤Ÿå‘ç”Ÿã€‚
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">InstancePtr</code></span><span class="SemanticString">æ˜¯æŒ‡å‘</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">XScuGic</code></span><span class="SemanticString">å®ä¾‹çš„æŒ‡é’ˆã€‚
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Int_Id</code></span><span class="SemanticString">æ˜¯ä¸­æ–­æºçš„ä¸­æ–­å·ã€‚</span></span></p></div><pre id="https://www.notion.so/f71958103f8a4768b9c1af1070314ad7" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>#define XScuTimer_EnableInterrupt(InstancePtr)				\\
	XScuTimer_WriteReg((InstancePtr)-&gt;Config.BaseAddr,		\\
			XSCUTIMER_CONTROL_OFFSET,			\\
			(XScuTimer_ReadReg((InstancePtr)-&gt;Config.BaseAddr, \\
					XSCUTIMER_CONTROL_OFFSET) |	\\
					XSCUTIMER_CONTROL_IRQ_ENABLE_MASK))
</span></span></span></code></pre><div id="https://www.notion.so/5ad6ebff1a354fbe8c47311192f4fcdb" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">å…è®¸å®šæ—¶å™¨ä¸­æ–­ã€‚
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">InstancePtr</code></span><span class="SemanticString">æ˜¯æŒ‡å‘ç§æœ‰å®šæ—¶å™¨è®¾å¤‡å®ä¾‹çš„æŒ‡é’ˆã€‚</span></span></p></div><h2 id="https://www.notion.so/e2847accdc904c85bb7f9e3364214224" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/e2847accdc904c85bb7f9e3364214224"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">å¯åŠ¨ç§æœ‰å®šæ—¶å™¨</span></span></h2><pre id="https://www.notion.so/e39a4cc26cf04b8491016182875fb5b0" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>void XScuTimer_Start(XScuTimer *InstancePtr);
</span></span></span></code></pre><div id="https://www.notion.so/637779d7c1894705a21d2ac0076578c2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">å¯åŠ¨å®šæ—¶å™¨ã€‚
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">InstancePtr</code></span><span class="SemanticString">æ˜¯æŒ‡å‘ç§æœ‰å®šæ—¶å™¨è®¾å¤‡å®ä¾‹çš„æŒ‡é’ˆã€‚</span></span></p></div><pre id="https://www.notion.so/0bdc5ef0cac64e399e4a13482a2350e2" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>#define XScuTimer_ClearInterruptStatus(InstancePtr)			\\
	XScuTimer_WriteReg((InstancePtr)-&gt;Config.BaseAddr,		\\
		XSCUTIMER_ISR_OFFSET, XSCUTIMER_ISR_EVENT_FLAG_MASK)
</span></span></span></code></pre><div id="https://www.notion.so/f7cdfca0d4e64813b15c95694397ecc1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">æ¸…é™¤ä¸­æ–­çŠ¶æ€ã€‚
</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">InstancePtr</code></span><span class="SemanticString">æ˜¯æŒ‡å‘ç§æœ‰å®šæ—¶å™¨è®¾å¤‡å®ä¾‹çš„æŒ‡é’ˆã€‚</span></span></p></div><div id="https://www.notion.so/8c2611d66812417e89cf858caa57a21d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">åœ¨å®šæ—¶å™¨ä¸­æ–­å¤„ç†ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¿…é¡»æ¸…é™¤ä¸­æ–­æ ‡å¿—ï¼Œå› æ­¤</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">XscuGic_Connect</code></span><span class="SemanticString">çš„ç¬¬ä¸‰ä¸ªå‚æ•°è®¾ç½®ä¸ºå®šæ—¶å™¨çš„æ§åˆ¶è®¾å¤‡å®ä¾‹çš„æŒ‡é’ˆï¼Œåœ¨è°ƒç”¨ä¸­æ–­çŠ¶æ€æ¸…é™¤å‡½æ•°æ—¶ä¼šç”¨åˆ°è¯¥å‚æ•°ã€‚</span></span></p></div><h2 id="https://www.notion.so/a7deef14f35b46e6ba96b331d1058bc4" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/a7deef14f35b46e6ba96b331d1058bc4"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">å®ä¾‹å‚è€ƒ</span></span></h2><div id="https://www.notion.so/e8e1548e2f1046d28e60be51c7d51cab" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">æ¬è¿ç±³è”å®¢æ–‡ç« ä¸­çš„æ¡ˆä¾‹ï¼Œå®Œæˆç§æœ‰å®šæ—¶å™¨è®¡ç§’ã€‚</span></span></p></div><pre id="https://www.notion.so/0b4d37532d584d2aa50773fffbe386ec" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>
/*
 *
 * www.osrc.cn
 * www.milinker.com
 * copyright by nan jin mi lian dian zi www.osrc.cn
 * axi dma test
 *
*/

#include &quot;xscugic.h&quot;
#include &quot;xil_exception.h&quot;
#include &quot;xscutimer.h&quot;
#include &quot;xparameters.h&quot;

#define INTC_DEVICE_ID          XPAR_SCUGIC_SINGLE_DEVICE_ID
extern volatile int usec;
//timer info
#define TIMER_DEVICE_ID     XPAR_XSCUTIMER_0_DEVICE_ID
#define TIMER_IRPT_INTR     XPAR_SCUTIMER_INTR

static XScuGic Intc; //GIC
static  XScuTimer Timer;//timer


#define TIMER_LOAD_VALUE    0x13D92D3F //1S

static void TimerIntrHandler(void *CallBackRef)
{

    XScuTimer *TimerInstancePtr = (XScuTimer *) CallBackRef;
    XScuTimer_ClearInterruptStatus(TimerInstancePtr);
    usec++;
    xil_printf(&quot; %d Second\\n\\r&quot;,usec);  //æ¯ç§’æ‰“å°è¾“å‡ºä¸€æ¬¡
}

int init_timer(void)
{
    XScuTimer_Config *TMRConfigPtr;     //timer config
    //ç§æœ‰å®šæ—¶å™¨åˆå§‹åŒ–
    TMRConfigPtr = XScuTimer_LookupConfig(0);
    XScuTimer_CfgInitialize(&amp;Timer, TMRConfigPtr,TMRConfigPtr-&gt;BaseAddr);
    //XScuTimer_SelfTest(&amp;Timer);
    //åŠ è½½è®¡æ•°å‘¨æœŸï¼Œç§æœ‰å®šæ—¶å™¨çš„æ—¶é’Ÿä¸ºCPUçš„ä¸€åŠï¼Œä¸º333MHZ,å¦‚æœè®¡æ•°1S,åŠ è½½å€¼ä¸º1sx(333x1000x1000)(1/s)-1=0x13D92D3F
    XScuTimer_LoadTimer(&amp;Timer, TIMER_LOAD_VALUE);//F8F00600+0=reg=F8F00600
    //è‡ªåŠ¨è£…è½½
    XScuTimer_EnableAutoReload(&amp;Timer);//F8F00600+8=reg=F8F00608
	XScuGic_Config *IntcConfig;
	IntcConfig = XScuGic_LookupConfig(INTC_DEVICE_ID);
	if (NULL == IntcConfig) {
		return XST_FAILURE;
	}
	int Status = XScuGic_CfgInitialize(&amp;Intc, IntcConfig,
					IntcConfig-&gt;CpuBaseAddress);
	if (Status != XST_SUCCESS) {
		return XST_FAILURE;
	}
	/* Enable interrupts from the hardware */
	Xil_ExceptionInit();
	Xil_ExceptionRegisterHandler(XIL_EXCEPTION_ID_INT,
			(Xil_ExceptionHandler)XScuGic_InterruptHandler,
			(void *)&amp;Intc);
	Xil_ExceptionEnable();
    XScuGic_Connect(&amp;Intc, TIMER_IRPT_INTR,
                    (Xil_ExceptionHandler)TimerIntrHandler,//set up the timer interrupt
                    (void *)&amp;Timer);

    XScuGic_Enable(&amp;Intc, TIMER_IRPT_INTR);//enable the interrupt for the Timer at GIC
    XScuTimer_EnableInterrupt(&amp;Timer);//enable interrupt on the timer
    XScuTimer_Start(&amp;Timer);
    return XST_SUCCESS;
}

int main(void)
{
	xil_printf(&quot;------------START-------------\\n&quot;);
	int Status=init_timer();
	if(Status!=XST_SUCCESS){
		xil_printf(&quot;Failed to initialize Timer!\\n\\r&quot;);
		return 0;
	}

	while(1);
}
</span></span></span></code></pre></article>  <div id="vcomments"></div>
  <script>
    new Valine({
      el: '#vcomments',
      appId: 'x3yNlOp8snKVbHLuM3MDgyPm-gzGzoHsz',
      appKey: 'IxbPmtJ4C181kqwCPyUfHb67',
      avatar: 'retro',
      placeholder: 'Welcome to comment here233!',
      requiredFields: ['nick', 'mail']
    })
  </script>
  <footer class="Footer">
    <div>&copy; idzc.me 2020</div>
    <div>&centerdot;</div>
    <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
        rel="noopener noreferrer">Notablog</a>.
    </div>
  </footer>
</body>

</html>