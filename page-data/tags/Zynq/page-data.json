{"componentChunkName":"component---plugins-gine-theme-mod-src-components-post-tag-tag-page-js","path":"/tags/Zynq","result":{"data":{"allPosts":{"edges":[{"node":{"description":null,"html":"<div data-block-id=\"2e3e85c2-68f3-4518-a2b7-29f5ae9713b5\" class=\"notion-selectable notion-table_of_contents-block\" style=\"width: 100%; max-width: 608px; margin-top: 2px; margin-bottom: 4px;\"><div style=\"position: relative;\"><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#7613b756-68f5-4740-a1ae-59a01bc3b5e5\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 0px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">参考文章</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#eb4a3069-b745-4526-801a-83fe52be964e\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 0px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">相关API</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#d09a9ddf-366e-4b76-81ca-f15945ef83e3\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">1.初始化GIC中断控制器；</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#e85118bd-5d50-4c48-bf85-ce0e8043933c\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">2.设置中断异常</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#f3d62186-039e-4a1b-a917-dbf2dd72fa77\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">3.绑定中断服务函数</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#8b9741d5-c5c6-4828-80f2-7d86ab1ee202\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">4.设置中断优先级和触发方式</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#56fe8170-7199-4c6b-a406-93c2c970f4ef\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">5.绑定触发中断的CPU</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#e13da9e1-2bce-4cad-976c-5679468e9a88\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">6.允许中断</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#c3010ee1-2bf7-4324-8b3d-e03bd6dc8e07\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">7.触发软件中断</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#b3eb31e8-9907-45fc-887e-097e52f8cc39\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 0px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">实例</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#0e770d64-af9f-48d2-b070-c900d269e6bd\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">P0_main.c:</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#6dcd2a16-92b0-4616-ba5d-047508752dd6\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">P1_main.c</div></div></div></a></div></div></div><div data-block-id=\"7613b756-68f5-4740-a1ae-59a01bc3b5e5\" class=\"notion-selectable notion-sub_header-block\" id=\"7613b756-68f5-4740-a1ae-59a01bc3b5e5\" style=\"width: 100%; max-width: 608px; margin-top: 1.4em; margin-bottom: 1px; color: rgb(55, 53, 47);\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.5em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 2\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">参考文章</div></div></div><div data-block-id=\"e8e55d29-2196-496c-bfec-ce54ffcf3749\" class=\"notion-selectable notion-bookmark-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div><div style=\"display: flex;\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://zhuanlan.zhihu.com/p/30653352\" style=\"display: block; color: inherit; text-decoration: none; flex-grow: 1; min-width: 0px;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%; display: flex; flex-wrap: wrap-reverse; align-items: stretch; text-align: left; overflow: hidden; border: 1px solid rgba(55, 53, 47, 0.16); border-radius: 3px; position: relative; color: inherit; fill: inherit;\"><div style=\"flex: 4 1 180px; padding: 12px 14px 14px; overflow: hidden; text-align: left;\"><div style=\"font-size: 14px; line-height: 20px; color: rgb(55, 53, 47); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; min-height: 24px; margin-bottom: 2px;\">ZYNQ有两个CPU？（三）--SGI异步通信</div><div style=\"font-size: 12px; line-height: 16px; color: rgba(55, 53, 47, 0.6); height: 32px; overflow: hidden;\">前面两篇文章中我分享了ZYNQ上在Standalone环境下搭建AMP和用OCM共享内存传递数据的方法。而到目前为止实现的功能是在两个CPU上跑了多线程，线程之间可以通过共享内存进行同步通信，而我们知道同步通信需要耗费大量的CPU时间，为了节约CPU时间必须要采用异步通信的方式也就是中断方式。 ...</div><div style=\"display: flex; margin-top: 6px;\"><img src=\"https://www.notion.so/image/https%3A%2F%2Fstatic.zhihu.com%2Fstatic%2Ffavicon.ico?table=block&amp;id=e8e55d29-2196-496c-bfec-ce54ffcf3749&amp;cache=v2\" style=\"width: 16px; height: 16px; min-width: 16px; margin-right: 6px;\"><div style=\"font-size: 12px; line-height: 16px; color: rgb(55, 53, 47); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">https://zhuanlan.zhihu.com/p/30653352</div></div></div><div style=\"flex: 1 1 180px; display: block; position: relative;\"><div style=\"position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px;\"><div style=\"width: 100%; height: 100%;\"><img src=\"https://www.notion.so/image/https%3A%2F%2Fpic1.zhimg.com%2Fv2-6ee5566fa3da0237faf8326cf39a5189_b.jpg?table=block&amp;id=e8e55d29-2196-496c-bfec-ce54ffcf3749&amp;width=500&amp;cache=v2\" style=\"display: block; object-fit: cover; border-radius: 1px; width: 100%; height: 100%;\"></div></div></div></div></a></div></div></div><div data-block-id=\"b40ad8b9-7c65-4a79-ab96-81dab9b03353\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">使用软件中断的基本流程如下：</div></div></div></div><div data-block-id=\"100a95f9-54be-408e-a6e4-b913a5da159e\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">1.初始化GIC中断控制器</div></div></div></div></div><div data-block-id=\"abbe179c-a40f-4db7-a185-51d1deb90cc7\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">2.设置中断异常</div></div></div></div></div><div data-block-id=\"a09d6b7b-2370-4e40-bf8f-80abc06b15ae\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">3.绑定中断服务函数</div></div></div></div></div><div data-block-id=\"030bade0-4156-4df7-bf72-70cea5f61445\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">4.设置中断优先级和触发方式</div></div></div></div></div><div data-block-id=\"fbeec7e1-69f5-42be-8ee9-f536054458c2\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">5.绑定触发中断的CPU</div></div></div></div></div><div data-block-id=\"037dbff8-b3bc-4200-a198-eef4d90f9bdf\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">6.允许中断</div></div></div></div></div><div data-block-id=\"c35b57da-183d-46a9-ae1a-e13973cc5665\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">7.触发软件中断</div></div></div></div></div><div data-block-id=\"eb4a3069-b745-4526-801a-83fe52be964e\" class=\"notion-selectable notion-sub_header-block\" id=\"eb4a3069-b745-4526-801a-83fe52be964e\" style=\"width: 100%; max-width: 608px; margin-top: 1.4em; margin-bottom: 1px; color: rgb(55, 53, 47);\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.5em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 2\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">相关API</div></div></div><div data-block-id=\"d09a9ddf-366e-4b76-81ca-f15945ef83e3\" class=\"notion-selectable notion-sub_sub_header-block\" id=\"d09a9ddf-366e-4b76-81ca-f15945ef83e3\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">1.初始化GIC中断控制器；</div></div></div><div data-block-id=\"8727b6bb-ffbe-46f9-a8d3-d0928c7d0d65\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span data-token-index=\"0\">XScuGic_Config </span><span class=\"token operator\" data-token-index=\"0\">*</span><span class=\"token function\" data-token-index=\"0\">XScuGic_LookupConfig</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">u16 DeviceId</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"e8377fa5-610a-4ce4-af91-33aeb2ff9b1d\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">通过设备id查找设备的配置\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">DeviceID</span>，设备ID的唯一标识符。\n返回<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">XScuGic_Config *</span>型指针，指向指定设备的配置信息结构体中。</div></div></div></div><div data-block-id=\"48d32813-16d3-4593-ad4a-bbb61436b0d3\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span data-token-index=\"0\">s32  </span><span class=\"token function\" data-token-index=\"0\">XScuGic_CfgInitialize</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">InstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t\t\tXScuGic_Config </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">ConfigPtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t\t\tu32 EffectiveAddr</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"29e0a3f8-2322-4254-b632-5531785bbdb7\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">对指定的中断控制器实例进行初始化。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">InstancePtr</span>是指向<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">XScuGic</span>实例的指针。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"5\">ConfigPtr</span>是指向所关联的特定设备的配置表的指针。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"7\">EffectiveAddr</span>是所关联设备的有效地址。</div></div></div></div><div data-block-id=\"e85118bd-5d50-4c48-bf85-ce0e8043933c\" class=\"notion-selectable notion-sub_sub_header-block\" id=\"e85118bd-5d50-4c48-bf85-ce0e8043933c\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">2.设置中断异常</div></div></div><div data-block-id=\"0a4c1def-4ac1-41de-ba69-5e80149e7e11\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">Xil_ExceptionInit</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"4f460529-f8be-464e-acef-3d7e24c84b4e\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">异常处理，在Coretex-A9中不做任何事，因为异常处理已被静态初始化。</div></div></div></div><div data-block-id=\"d57e6f61-c7f5-48f0-9ff7-2cd928aa061a\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">Xil_ExceptionRegisterHandler</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">u32 Exception_id</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t\t\t    Xil_ExceptionHandler Handler</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t\t\t    </span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">Data</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"ad9d4eff-9aa8-4f9d-b9ca-0d42e31ae9a2\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">为特定的异常注册一个handler，当处理器发生特定异常后调用对应handler。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">Exception_id</span>异常源的id。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">Handler</span>是异常处理函数。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"5\">Data</span>是异常发生时，传给对应handler的参数。</div></div></div></div><div data-block-id=\"b8869e42-d261-4914-bde4-fb709234d94a\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">define</span><span class=\"token macro property\" data-token-index=\"0\"> Xil_ExceptionEnable() \\\\</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token function\" data-token-index=\"0\">Xil_ExceptionEnableMask</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XIL_EXCEPTION_IRQ</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"c18315f4-4a72-46c2-b4ce-5e78fd867775\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">允许中断的异常处理</div></div></div></div><div data-block-id=\"f3d62186-039e-4a1b-a917-dbf2dd72fa77\" class=\"notion-selectable notion-sub_sub_header-block\" id=\"f3d62186-039e-4a1b-a917-dbf2dd72fa77\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">3.绑定中断服务函数</div></div></div><div data-block-id=\"9fd80ded-5fd9-4b4a-bc0b-e22dc803365e\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span data-token-index=\"0\">s32  </span><span class=\"token function\" data-token-index=\"0\">XScuGic_Connect</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">InstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u32 Int_Id</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n                      Xil_InterruptHandler Handler</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">CallBackRef</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"85c45521-4a1e-4f88-9a11-0349fb5891b9\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">将指定中断服务函数绑定到指定中断号上。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">InstancePtr</span>是指向<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">XScuGic</span>实例的指针。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"5\">Int_Id</span>是中断源的中断号。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"7\">Handler</span>是中断处理函数。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"9\">CallBackRef</span>是回调的一个引用，会传递给中断服务函数作为参数，一般是所关联的设备的实例指针，通过类型转换在中断服务函数获取设备实例。</div></div></div></div><div data-block-id=\"8b9741d5-c5c6-4828-80f2-7d86ab1ee202\" class=\"notion-selectable notion-sub_sub_header-block\" id=\"8b9741d5-c5c6-4828-80f2-7d86ab1ee202\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">4.设置中断优先级和触发方式</div></div></div><div data-block-id=\"214ed0c2-cfaf-4d04-9529-4cbb71240761\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">XScuGic_SetPriorityTriggerType</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">InstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u32 Int_Id</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t\t\t\tu8 Priority</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u8 Trigger</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"8138cd3c-646c-419b-9415-3fe177b303f1\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">为指定中断源设定中断优先级和触发类型。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">InstancePtr</span>是指向<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">XScuGic</span>实例的指针。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"5\">Int_Id</span>是中断源的中断号。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"7\">Priority</span>是要将中断源更新后的优先级，0为最高，0xF8为最低。有32个等级，以8为步长，0,8,16,...,248。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"9\">Trigger</span>是要将中断源更新后的触发类型。</div></div></div></div><div data-block-id=\"56fe8170-7199-4c6b-a406-93c2c970f4ef\" class=\"notion-selectable notion-sub_sub_header-block\" id=\"56fe8170-7199-4c6b-a406-93c2c970f4ef\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">5.绑定触发中断的CPU</div></div></div><div data-block-id=\"b9ec32ba-0fc8-4252-a3e5-45800881c415\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">XScuGic_InterruptMaptoCpu</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">InstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u8 Cpu_Id</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u32 Int_Id</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"cc047ce7-592f-4f57-bd81-5144a4643620\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">将中断源和目标CPU绑定\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">InstancePtr</span>是指向<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">XScuGic</span>实例的指针。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"5\">Cpu_Id</span>目标CPU的id。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"7\">Int_Id</span>是中断源的中断号。</div></div></div></div><div data-block-id=\"e13da9e1-2bce-4cad-976c-5679468e9a88\" class=\"notion-selectable notion-sub_sub_header-block\" id=\"e13da9e1-2bce-4cad-976c-5679468e9a88\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">6.允许中断</div></div></div><div data-block-id=\"f6033338-21cd-4670-883a-aae76d620a64\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">XScuGic_Enable</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">InstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u32 Int_Id</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"9cba8973-4429-46b9-8d53-b4478e7e8b46\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">中断使能，在该函数调用后，可使对应id的pending的中断能够发生。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">InstancePtr</span>是指向<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">XScuGic</span>实例的指针。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"5\">Int_Id</span>是中断源的中断号。</div></div></div></div><div data-block-id=\"c3010ee1-2bf7-4324-8b3d-e03bd6dc8e07\" class=\"notion-selectable notion-sub_sub_header-block\" id=\"c3010ee1-2bf7-4324-8b3d-e03bd6dc8e07\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">7.触发软件中断</div></div></div><div data-block-id=\"c851e606-e813-41e3-a443-6c84eb96edc7\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span data-token-index=\"0\">s32  </span><span class=\"token function\" data-token-index=\"0\">XScuGic_SoftwareIntr</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">InstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u32 Int_Id</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u32 Cpu_Id</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"77ba6894-499a-46d6-8fac-17419e5cecce\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">通过软件模拟中断的方式在中断控制器中触发中断。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">InstancePtr</span>是指向<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">XScuGic</span>实例的指针。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"5\">Int_Id</span>是软件模拟的中断源的中断号。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"7\">Cpu_Id</span>将中断送往到的目标CPU的id。</div></div></div></div><div data-block-id=\"b3eb31e8-9907-45fc-887e-097e52f8cc39\" class=\"notion-selectable notion-sub_header-block\" id=\"b3eb31e8-9907-45fc-887e-097e52f8cc39\" style=\"width: 100%; max-width: 608px; margin-top: 1.4em; margin-bottom: 1px; color: rgb(55, 53, 47);\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.5em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 2\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">实例</div></div></div><div data-block-id=\"ddf179d9-c9ea-4276-bd1b-0fb7ea45cb9e\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">搬运文章3的使用实例:\n该例子中，cpu0和cpu1都注册两个软件中断，将1号软件中断注册给cpu1，表示cpu0发送中断给cpu1，将2号软件中断注册给cpu0，表示cpu1发送中断给cpu0；然后在程序运行时，cpu0触发1号软件中断，此时cpu1正在运行主程序被该中断中断，进入中断服务函数，其处理完中断后触发2号软件中断，此时该中断会中断cpu0，进入中断服务函数，cpu0处理完中断后回到主函数，再触发1号软件中断，往复运行。</div></div></div></div><div data-block-id=\"1c611115-a46c-4d7e-b538-f494f7ff4151\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">代码略作修改后如下。</div></div></div></div><div data-block-id=\"0e770d64-af9f-48d2-b070-c900d269e6bd\" class=\"notion-selectable notion-sub_sub_header-block\" id=\"0e770d64-af9f-48d2-b070-c900d269e6bd\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">P0_main.c</span>:</div></div></div><div data-block-id=\"8c6e8832-0c67-4d4d-b426-6d40eb16726b\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token string\" data-token-index=\"0\">&lt;stdio.h&gt;</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"xil_cache.h\"</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"xparameters.h\"</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"xil_mmu.h\"</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"xil_misc_psreset_api.h\"</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"xil_exception.h\"</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"xscugic.h\"</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"xuartps.h\"</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"stdio.h\"</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"sleep.h\"</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"xil_printf.h\"</span><span data-token-index=\"0\">\n\n</span><span class=\"token keyword\" data-token-index=\"0\">volatile</span><span data-token-index=\"0\"> u8 software_intr_received </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">define</span><span class=\"token macro property\" data-token-index=\"0\"> TRIGGER_BY_CPU0_INT_ID   0x01</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">define</span><span class=\"token macro property\" data-token-index=\"0\"> TRIGGER_BY_CPU1_INT_ID   0x02</span><span data-token-index=\"0\">\n\n</span><span class=\"token comment\" data-token-index=\"0\">//函数声明</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">sys_intr_init</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">Setup_Intr_Exception</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> IntcInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">Scu_Intr_Init</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> IntancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> Scu_Int_ID</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">Init_Software_Intr</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">GicInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\tXil_InterruptHandler IntrHandler</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u16 SoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u8 CpuId</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">Gen_Software_Intr</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">GicInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u16 SoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u32 CpuId</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">IntrFromCPU1_Handler</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">Callback</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\nXScuGic ScuGic</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">delay</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">unsigned</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> count</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> i </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">i </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> i </span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span data-token-index=\"0\"> count</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> i</span><span class=\"token operator\" data-token-index=\"0\">++</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">main</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">sys_intr_init</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"cpu0 start!\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">/*\n\tGen_Software_Intr(&amp;ScuGic, TRIGGER_BY_CPU0_INT_ID,\n\t\t\tXSCUGIC_SPI_CPU1_MASK);\n\t\t\t*/</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">while</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">1</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">==</span><span data-token-index=\"0\"> software_intr_received</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t\tsoftware_intr_received </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"So, cpu0_main can do ...\\\\r\\\\n\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token function\" data-token-index=\"0\">Gen_Software_Intr</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">ScuGic</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> TRIGGER_BY_CPU0_INT_ID</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t\t\t\tXSCUGIC_SPI_CPU1_MASK</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token function\" data-token-index=\"0\">delay</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">200000000</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">return</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">sys_intr_init</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">//初始化GIC</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">Scu_Intr_Init</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">ScuGic</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> XPAR_SCUGIC_SINGLE_DEVICE_ID</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">//绑定中断服务函数，设置中断优先级和触发方式，绑定触发中断到目标CPU，允许中断</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">Init_Software_Intr</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">ScuGic</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">IntrFromCPU1_Handler</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> TRIGGER_BY_CPU1_INT_ID</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">Setup_Intr_Exception</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">ScuGic</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">Setup_Intr_Exception</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> IntcInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">//connect hardware interrupt</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">Xil_ExceptionInit</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">Xil_ExceptionRegisterHandler</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XIL_EXCEPTION_ID_INT</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">Xil_ExceptionHandler</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> XScuGic_InterruptHandler</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> IntcInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">//enable hardware interrupt</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">Xil_ExceptionEnable</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\n</span><span class=\"token comment\" data-token-index=\"0\">//1.初始化GIC中断控制器；</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">Scu_Intr_Init</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> IntancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> Scu_Int_ID</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\tXScuGic_Config </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">ScuConfigPtr</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\tScuConfigPtr </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">XScuGic_LookupConfig</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">Scu_Int_ID</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span class=\"token comment\" data-token-index=\"0\">//中断设置查找 1</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">XScuGic_CfgInitialize</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">IntancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> ScuConfigPtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span class=\"token comment\" data-token-index=\"0\">//GIC初始化 2</span><span data-token-index=\"0\">\n\t\t\tScuConfigPtr</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">CpuBaseAddress</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">IntrFromCPU1_Handler</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">Callback</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"P0_main.c: receive interrupt from core1!\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\tsoftware_intr_received </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n</span><span class=\"token comment\" data-token-index=\"0\">//2.绑定中断服务函数；3设置中断优先级和触发方式；4.绑定触发中断的CPU;5.允许中断</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">Init_Software_Intr</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">GicInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\tXil_InterruptHandler IntrHandler</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u16 SoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u8 CpuId</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> Status</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">XScuGic_SetPriorityTriggerType</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">GicInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> SoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0xd0</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0x3</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span class=\"token comment\" data-token-index=\"0\">//设置中断优先级及中断触发方式 3</span><span data-token-index=\"0\">\n\tStatus </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">XScuGic_Connect</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">GicInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> SoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">Xil_InterruptHandler</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> IntrHandler</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token constant\" data-token-index=\"0\">NULL</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span class=\"token comment\" data-token-index=\"0\">//设置中断服务程序入口地址 4</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">Status </span><span class=\"token operator\" data-token-index=\"0\">!=</span><span data-token-index=\"0\"> XST_SUCCESS</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"core%d: interrupt %d set fail!\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> XPAR_CPU_ID</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t\t\tSoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">return</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">XScuGic_InterruptMaptoCpu</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">GicInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> CpuId</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> SoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span class=\"token comment\" data-token-index=\"0\">//配置中断到对应的CPU 5</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">XScuGic_Enable</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">GicInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> SoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span class=\"token comment\" data-token-index=\"0\">//GIC允许，允许中断</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\n</span><span class=\"token comment\" data-token-index=\"0\">//6.触发软件中断；</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">Gen_Software_Intr</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">GicInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u16 SoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u32 CpuId</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> Status</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\tStatus </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">XScuGic_SoftwareIntr</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">GicInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> SoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> CpuId</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span class=\"token comment\" data-token-index=\"0\">//在正在更新的内核中触发软件中断。该命令将向该指定内核发出一个软件中断</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">Status </span><span class=\"token operator\" data-token-index=\"0\">!=</span><span data-token-index=\"0\"> XST_SUCCESS</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"core%d: interrupt %d gen fail!\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> XPAR_CPU_ID</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t\t\tSoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">return</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"6dcd2a16-92b0-4616-ba5d-047508752dd6\" class=\"notion-selectable notion-sub_sub_header-block\" id=\"6dcd2a16-92b0-4616-ba5d-047508752dd6\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">P1_main.c</span></div></div></div><div data-block-id=\"d37fd94b-05f7-4732-8009-7fd5ea543c3f\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 0px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token string\" data-token-index=\"0\">&lt;stdio.h&gt;</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"xil_cache.h\"</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"xparameters.h\"</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"xil_mmu.h\"</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"xil_misc_psreset_api.h\"</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"xil_exception.h\"</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"xscugic.h\"</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"xuartps.h\"</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"stdio.h\"</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"sleep.h\"</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"xil_printf.h\"</span><span data-token-index=\"0\">\n\n</span><span class=\"token keyword\" data-token-index=\"0\">volatile</span><span data-token-index=\"0\"> u8 software_intr_received </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">define</span><span class=\"token macro property\" data-token-index=\"0\"> TRIGGER_BY_CPU0_INT_ID   0x01</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">define</span><span class=\"token macro property\" data-token-index=\"0\"> TRIGGER_BY_CPU1_INT_ID   0x02</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">sys_intr_init</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">Setup_Intr_Exception</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> IntcInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">Scu_Intr_Init</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> IntancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> Scu_Int_ID</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">Init_Software_Intr</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">GicInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\tXil_InterruptHandler IntrHandler</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u16 SoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u8 CpuId</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">Gen_Software_Intr</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">GicInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u16 SoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u32 CpuId</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">IntrFromCPU0_Handler</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">Callback</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\nXScuGic ScuGic</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">delay</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">unsigned</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> count</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> i </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">i </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> i </span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span data-token-index=\"0\"> count</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> i</span><span class=\"token operator\" data-token-index=\"0\">++</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\n</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">main</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">sys_intr_init</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"cpu1 start!\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">Gen_Software_Intr</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">ScuGic</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> TRIGGER_BY_CPU1_INT_ID</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t\tXSCUGIC_SPI_CPU0_MASK</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">while</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">1</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">==</span><span data-token-index=\"0\"> software_intr_received</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t\tsoftware_intr_received </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"So, cpu1_main can do ...\\\\r\\\\n\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token function\" data-token-index=\"0\">Gen_Software_Intr</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">ScuGic</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> TRIGGER_BY_CPU1_INT_ID</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t\t\t\tXSCUGIC_SPI_CPU0_MASK</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token function\" data-token-index=\"0\">delay</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">200000000</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">return</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">sys_intr_init</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">Scu_Intr_Init</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">ScuGic</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> XPAR_SCUGIC_SINGLE_DEVICE_ID</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">Init_Software_Intr</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">ScuGic</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> IntrFromCPU0_Handler</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> TRIGGER_BY_CPU0_INT_ID</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">Setup_Intr_Exception</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">ScuGic</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">Setup_Intr_Exception</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> IntcInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">//connect hardware interrupt</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">Xil_ExceptionInit</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">Xil_ExceptionRegisterHandler</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XIL_EXCEPTION_ID_INT</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">Xil_ExceptionHandler</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> XScuGic_InterruptHandler</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> IntcInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">//enable hardware interrupt</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">Xil_ExceptionEnable</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">Scu_Intr_Init</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> IntancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> Scu_Int_ID</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\tXScuGic_Config </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">ScuConfigPtr</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">//find device</span><span data-token-index=\"0\">\n\tScuConfigPtr </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">XScuGic_LookupConfig</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">Scu_Int_ID</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">//config scuint</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">XScuGic_CfgInitialize</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">IntancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> ScuConfigPtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t\tScuConfigPtr</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">CpuBaseAddress</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">IntrFromCPU0_Handler</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">Callback</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"P1_main.c: receive interrupt from core0!\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\tsoftware_intr_received </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">Init_Software_Intr</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">GicInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\tXil_InterruptHandler IntrHandler</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u16 SoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u8 CpuId</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> Status</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">XScuGic_SetPriorityTriggerType</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">GicInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> SoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0xB0</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0x2</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\tStatus </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">XScuGic_Connect</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">GicInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> SoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">Xil_InterruptHandler</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> IntrHandler</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token constant\" data-token-index=\"0\">NULL</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">Status </span><span class=\"token operator\" data-token-index=\"0\">!=</span><span data-token-index=\"0\"> XST_SUCCESS</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"core%d: interrupt %d set fail!\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> XPAR_CPU_ID</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t\t\tSoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">return</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">XScuGic_InterruptMaptoCpu</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">GicInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> CpuId</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> SoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span class=\"token comment\" data-token-index=\"0\">//map the the Software interrupt to target CPU</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">XScuGic_Enable</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">GicInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> SoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span class=\"token comment\" data-token-index=\"0\">//enable the interrupt for the Software interrupt at GIC</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">Gen_Software_Intr</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XScuGic </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">GicInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u16 SoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> u32 CpuId</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> Status</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\tStatus </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">XScuGic_SoftwareIntr</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">GicInstancePtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> SoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> CpuId</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">Status </span><span class=\"token operator\" data-token-index=\"0\">!=</span><span data-token-index=\"0\"> XST_SUCCESS</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"core%d: interrupt %d gen fail!\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> XPAR_CPU_ID</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t\t\tSoftwareIntrId</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">return</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div>","id":"9289d16e-6480-5f57-84f6-e5fbba11e44b","name":"Zynq7000软件中断SGI使用摘要","tags":["Zynq"],"categories":["嵌入式","Zynq7000"],"public_date":"2020-01-06","slug":"2ff1e3b74690456db18f83c48f3cf8c1"}},{"node":{"description":"简要介绍ZYNQ的私有定时中断的使用，在ZYNQ的纯PS里实现私有定时器中断。每隔一秒钟中断一次，在中断函数里计数加1，通过串口打印输出...","html":"<div data-block-id=\"32af40b7-d207-471a-a1ef-dffac26920c7\" class=\"notion-selectable notion-table_of_contents-block\" style=\"width: 100%; max-width: 608px; margin-top: 2px; margin-bottom: 4px;\"><div style=\"position: relative;\"><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#2397b843-c409-4f1f-9149-f4d2aff55e3a\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 0px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">初始化私有定时器设备实例</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#33e38de2-1946-4334-b253-6aa420d59a70\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 0px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">设置定时器中断</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#966bd03f-ef64-4f38-bb0d-74dba2c52d05\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">1.初始化GIC中断控制器；</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#2c120acc-249c-49cb-b8e9-136bc05adf8d\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">2.设置中断异常</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#3a68e2de-50ed-4a95-9c51-4a93d4e77268\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">3.绑定中断服务函数</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#523d0589-412c-4813-9810-3d581b55838e\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">4.使能中断</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#3a126960-7d19-45d4-9055-eb47daf22bb0\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 0px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">启动私有定时器</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#479325a7-031b-43e7-8fe0-c2a02e169b0a\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 0px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">实例参考</div></div></div></a></div></div></div><div data-block-id=\"1d79c920-784e-4519-8dc6-6abe1d4193de\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">参考文章：</div></div></div></div><div data-block-id=\"dcff2b5b-b51d-46a3-a6ab-15d74b1f50bd\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\"><a href=\"http://xilinx.eetrend.com/blog/2019/100043515.html\" style=\"cursor:pointer;color:inherit;word-wrap:break-word;text-decoration:inherit\" class=\"notion-link-token notion-enable-hover\" target=\"_blank\" rel=\"noopener noreferrer\" data-token-index=\"0\"><span style=\"border-bottom:0.05em solid;border-color:rgba(55,53,47,0.4);opacity:0.7\">学会Zynq（9）定时器使用示例（PPI）</span></a><a href=\"https://my.oschina.net/msxbo/blog/3099104\" style=\"cursor:pointer;color:inherit;word-wrap:break-word;text-decoration:inherit\" class=\"notion-link-token notion-enable-hover\" target=\"_blank\" rel=\"noopener noreferrer\" data-token-index=\"1\"><span style=\"border-bottom:0.05em solid;border-color:rgba(55,53,47,0.4);opacity:0.7\">米联客 ZYNQ/SOC精品教程 S02-CH08 定时器中断实验</span></a></div></div></div></div><div data-block-id=\"2397b843-c409-4f1f-9149-f4d2aff55e3a\" class=\"notion-selectable notion-sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1.4em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"2397b843-c409-4f1f-9149-f4d2aff55e3a\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.5em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 2\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">初始化私有定时器设备实例</div></div></div><div data-block-id=\"f78958fe-041b-468b-ac85-d815395bb856\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\">XScuTimer_Config *XScuTimer_LookupConfig(u16 DeviceId);\n\n</div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">Plain Text<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"8a82816f-39af-4b6a-94eb-09dfa73403c8\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">通过设备ID查找设备配置\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">DeviceId</span>，设备ID\n返回<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">XScuTimer_Config</span>型指针，指向配置表中对应设备ID的配置，若未查找到相应设备返回NULL。</div></div></div></div><div data-block-id=\"827ade58-362b-407e-b39c-5f0ff5999aa4\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\">s32 XScuTimer_CfgInitialize(XScuTimer *InstancePtr,\n\t\t\t XScuTimer_Config *ConfigPtr, u32 EffectiveAddress)\n\n</div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">Plain Text<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"91804f4e-83dc-47a1-aa15-e8b839284d9d\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">初始化指定的定时器设备。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">InstancePtr</span>，指向<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">XScuTimer</span>的一个实例。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"5\">ConfigPtr</span>，指向定时器实例的配置信息结构体\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"7\">EffectiveAddress</span>，设备的起始地址。\n返回初始化的结果状态，初始化成功为<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"9\">XST_SUCCESS</span>或者已被使用<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"11\">XST_DEVICE_IS_STARTED</span>。</div></div></div></div><div data-block-id=\"1ca57efa-71ce-450d-8bc2-4d41932972c0\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\">#define XScuTimer_LoadTimer(InstancePtr, Value)\t\t\t\t\\\\\n\tXScuTimer_WriteReg((InstancePtr)-&gt;Config.BaseAddr,\t\t\\\\\n\t\t\tXSCUTIMER_LOAD_OFFSET, (Value))\n\n</div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">Plain Text<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"20c98464-436d-4d6c-ad6a-80690060253a\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">加载定时器的计数器中的值，其本质上只是操作Timer Load寄存器。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">InstancePtr</span>，指向<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">XScuTimer</span>的一个实例。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"5\">Value</span>，计数的预加载值。\n私有定时器是从装载值递减到0时发出中断。私有定时器的工作时钟为333MHz，每1/333M秒减1。因此若想定时1s，则装载值为1/(1/333M)-1，</div></div></div></div><div data-block-id=\"9828ffb1-5b3c-460a-9c4e-65ba7d6e4d41\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\">#define XScuTimer_EnableAutoReload(InstancePtr)\t\t\t\t\\\\\n\tXScuTimer_WriteReg((InstancePtr)-&gt;Config.BaseAddr,\t\t\\\\\n\t\t\tXSCUTIMER_CONTROL_OFFSET,\t\t\t\\\\\n\t\t\t(XScuTimer_ReadReg((InstancePtr)-&gt;Config.BaseAddr, \\\\\n\t\t\t\tXSCUTIMER_CONTROL_OFFSET) |\t\t \\\\\n\t\t\t\tXSCUTIMER_CONTROL_AUTO_RELOAD_MASK))\n\n</div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">Plain Text<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"c6af08da-6103-4c4a-a663-cdf550730e9a\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">允许指定定时器设备实例能自动重载。</div></div></div></div><div data-block-id=\"33e38de2-1946-4334-b253-6aa420d59a70\" class=\"notion-selectable notion-sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1.4em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"33e38de2-1946-4334-b253-6aa420d59a70\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.5em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 2\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">设置定时器中断</div></div></div><div data-block-id=\"da46104e-ecab-4d33-8c77-829799f8bfbc\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">中断时基本过程：初始化中断控制器、设置中断异常、连接中断、使能中断。</div></div></div></div><div data-block-id=\"966bd03f-ef64-4f38-bb0d-74dba2c52d05\" class=\"notion-selectable notion-sub_sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"966bd03f-ef64-4f38-bb0d-74dba2c52d05\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">1.初始化GIC中断控制器；</div></div></div><div data-block-id=\"b4be02b2-dc31-4119-801c-fb33eac8a869\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\">XScuGic_Config *XScuGic_LookupConfig(u16 DeviceId);\n\n</div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">Plain Text<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"ae5ff065-4fed-4321-be68-632f85210119\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">通过设备id查找设备的配置\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">DeviceID</span>，设备ID的唯一标识符。\n返回<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">XScuGic_Config *</span>型指针，指向指定设备的配置信息结构体中。</div></div></div></div><div data-block-id=\"0a9e124a-9d7f-4aca-86c7-1a8a7881ffbb\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\">s32  XScuGic_CfgInitialize(XScuGic *InstancePtr,\n\t\t\t\tXScuGic_Config *ConfigPtr,\n\t\t\t\tu32 EffectiveAddr);\n\n</div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">Plain Text<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"30c779a4-c0ee-4ddd-8b1c-4be59cdd4dfe\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">对指定的中断控制器实例进行初始化。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">InstancePtr</span>是指向<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">XScuGic</span>实例的指针。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"5\">ConfigPtr</span>是指向所关联的特定设备的配置表的指针。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"7\">EffectiveAddr</span>是所关联设备的有效地址。</div></div></div></div><div data-block-id=\"2c120acc-249c-49cb-b8e9-136bc05adf8d\" class=\"notion-selectable notion-sub_sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"2c120acc-249c-49cb-b8e9-136bc05adf8d\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">2.设置中断异常</div></div></div><div data-block-id=\"c3b69219-88d2-49d9-a2da-7c73440fd73f\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\">void Xil_ExceptionInit(void);\n\n</div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">Plain Text<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"b4083229-0dc2-42aa-b3b3-51c849797526\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">异常处理，在Coretex-A9中不做任何事，因为异常处理已被静态初始化。</div></div></div></div><div data-block-id=\"6aa6c405-5201-43f0-b995-9785ff5d4f96\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\">void Xil_ExceptionRegisterHandler(u32 Exception_id,\n\t\t\t\t    Xil_ExceptionHandler Handler,\n\t\t\t\t    void *Data);\n\n</div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">Plain Text<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"1d52a1ad-22e5-4f0c-8517-95443e0b5fed\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">为特定的异常注册一个handler，当处理器发生特定异常后调用对应handler。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">Exception_id</span>异常源的id。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">Handler</span>是异常处理函数。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"5\">Data</span>是异常发生时，传给对应handler的参数。</div></div></div></div><div data-block-id=\"15714182-94b5-4939-9230-14b99ccb9c5c\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\">#define Xil_ExceptionEnable() \\\\\n\t\tXil_ExceptionEnableMask(XIL_EXCEPTION_IRQ)\n\n</div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">Plain Text<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"cd639eac-8888-40e3-b705-0c4fe38b5c10\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">允许中断的异常处理。</div></div></div></div><div data-block-id=\"3a68e2de-50ed-4a95-9c51-4a93d4e77268\" class=\"notion-selectable notion-sub_sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"3a68e2de-50ed-4a95-9c51-4a93d4e77268\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">3.绑定中断服务函数</div></div></div><div data-block-id=\"50f95688-e291-4a00-9ec4-5408ce6fc557\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\">s32  XScuGic_Connect(XScuGic *InstancePtr, u32 Int_Id,\n                      Xil_InterruptHandler Handler, void *CallBackRef);\n\n</div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">Plain Text<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"5c2b2e30-368c-4ce8-9488-b66a62749d90\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">将指定中断服务函数绑定到指定中断号上。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">InstancePtr</span>是指向<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">XScuGic</span>实例的指针。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"5\">Int_Id</span>是中断源的中断号。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"7\">Handler</span>是中断处理函数。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"9\">CallBackRef</span>是回调的一个引用，一般是所连接的设备的指针。</div></div></div></div><div data-block-id=\"523d0589-412c-4813-9810-3d581b55838e\" class=\"notion-selectable notion-sub_sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"523d0589-412c-4813-9810-3d581b55838e\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">4.使能中断</div></div></div><div data-block-id=\"d1e50daa-27e9-4473-86f7-e9168cf8d72b\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\">void XScuGic_Enable(XScuGic *InstancePtr, u32 Int_Id);\n\n</div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">Plain Text<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"d4498be4-8fd3-4833-a861-284f494fbd50\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">中断使能，在该函数调用后，可使对应id的pending的中断能够发生。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">InstancePtr</span>是指向<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">XScuGic</span>实例的指针。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"5\">Int_Id</span>是中断源的中断号。</div></div></div></div><div data-block-id=\"8703fbb7-8500-4aa8-83de-af84a01ed6cc\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\">#define XScuTimer_EnableInterrupt(InstancePtr)\t\t\t\t\\\\\n\tXScuTimer_WriteReg((InstancePtr)-&gt;Config.BaseAddr,\t\t\\\\\n\t\t\tXSCUTIMER_CONTROL_OFFSET,\t\t\t\\\\\n\t\t\t(XScuTimer_ReadReg((InstancePtr)-&gt;Config.BaseAddr, \\\\\n\t\t\t\t\tXSCUTIMER_CONTROL_OFFSET) |\t\\\\\n\t\t\t\t\tXSCUTIMER_CONTROL_IRQ_ENABLE_MASK))\n\n</div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">Plain Text<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"64e0725e-497a-4c8c-92df-8f0a789eaa59\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">允许定时器中断。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">InstancePtr</span>是指向私有定时器设备实例的指针。</div></div></div></div><div data-block-id=\"3a126960-7d19-45d4-9055-eb47daf22bb0\" class=\"notion-selectable notion-sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1.4em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"3a126960-7d19-45d4-9055-eb47daf22bb0\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.5em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 2\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">启动私有定时器</div></div></div><div data-block-id=\"955033d3-3b0f-4d43-825e-866d494c359b\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\">void XScuTimer_Start(XScuTimer *InstancePtr);\n\n</div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">Plain Text<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"d8db8ec5-966c-43ea-af1f-f6b5184502e9\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">启动定时器。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">InstancePtr</span>是指向私有定时器设备实例的指针。</div></div></div></div><div data-block-id=\"ccd9cf07-80b0-483c-b546-57879f46d775\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\">#define XScuTimer_ClearInterruptStatus(InstancePtr)\t\t\t\\\\\n\tXScuTimer_WriteReg((InstancePtr)-&gt;Config.BaseAddr,\t\t\\\\\n\t\tXSCUTIMER_ISR_OFFSET, XSCUTIMER_ISR_EVENT_FLAG_MASK)\n\n</div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">Plain Text<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"0c6daaf9-8a65-4d0b-9150-60b0d03d18d9\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">清除中断状态。\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">InstancePtr</span>是指向私有定时器设备实例的指针。</div></div></div></div><div data-block-id=\"5d7b51db-407b-4e70-807d-0dcf9fa04217\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">在定时器中断处理程序中，我们必须清除中断标志，因此<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">XscuGic_Connect</span>的第三个参数设置为定时器的控制设备实例的指针，在调用中断状态清除函数时会用到该参数。</div></div></div></div><div data-block-id=\"479325a7-031b-43e7-8fe0-c2a02e169b0a\" class=\"notion-selectable notion-sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1.4em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"479325a7-031b-43e7-8fe0-c2a02e169b0a\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.5em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 2\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">实例参考</div></div></div><div data-block-id=\"4ae88d94-0621-4d86-ba7b-df9cc3fb666b\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">搬运米联客文章中的案例，完成私有定时器计秒。</div></div></div></div><div data-block-id=\"bf5d0640-4576-4697-9c15-231ddd638e26\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 0px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\">\n/*\n *\n * www.osrc.cn\n * www.milinker.com\n * copyright by nan jin mi lian dian zi www.osrc.cn\n * axi dma test\n *\n*/\n\n#include \"xscugic.h\"\n#include \"xil_exception.h\"\n#include \"xscutimer.h\"\n#include \"xparameters.h\"\n\n#define INTC_DEVICE_ID          XPAR_SCUGIC_SINGLE_DEVICE_ID\nextern volatile int usec;\n//timer info\n#define TIMER_DEVICE_ID     XPAR_XSCUTIMER_0_DEVICE_ID\n#define TIMER_IRPT_INTR     XPAR_SCUTIMER_INTR\n\nstatic XScuGic Intc; //GIC\nstatic  XScuTimer Timer;//timer\n\n\n#define TIMER_LOAD_VALUE    0x13D92D3F //1S\n\nstatic void TimerIntrHandler(void *CallBackRef)\n{\n\n    XScuTimer *TimerInstancePtr = (XScuTimer *) CallBackRef;\n    XScuTimer_ClearInterruptStatus(TimerInstancePtr);\n    usec++;\n    xil_printf(\" %d Second\\\\n\\\\r\",usec);  //每秒打印输出一次\n}\n\nint init_timer(void)\n{\n    XScuTimer_Config *TMRConfigPtr;     //timer config\n    //私有定时器初始化\n    TMRConfigPtr = XScuTimer_LookupConfig(0);\n    XScuTimer_CfgInitialize(&amp;Timer, TMRConfigPtr,TMRConfigPtr-&gt;BaseAddr);\n    //XScuTimer_SelfTest(&amp;Timer);\n    //加载计数周期，私有定时器的时钟为CPU的一半，为333MHZ,如果计数1S,加载值为1sx(333x1000x1000)(1/s)-1=0x13D92D3F\n    XScuTimer_LoadTimer(&amp;Timer, TIMER_LOAD_VALUE);//F8F00600+0=reg=F8F00600\n    //自动装载\n    XScuTimer_EnableAutoReload(&amp;Timer);//F8F00600+8=reg=F8F00608\n\tXScuGic_Config *IntcConfig;\n\tIntcConfig = XScuGic_LookupConfig(INTC_DEVICE_ID);\n\tif (NULL == IntcConfig) {\n\t\treturn XST_FAILURE;\n\t}\n\tint Status = XScuGic_CfgInitialize(&amp;Intc, IntcConfig,\n\t\t\t\t\tIntcConfig-&gt;CpuBaseAddress);\n\tif (Status != XST_SUCCESS) {\n\t\treturn XST_FAILURE;\n\t}\n\t/* Enable interrupts from the hardware */\n\tXil_ExceptionInit();\n\tXil_ExceptionRegisterHandler(XIL_EXCEPTION_ID_INT,\n\t\t\t(Xil_ExceptionHandler)XScuGic_InterruptHandler,\n\t\t\t(void *)&amp;Intc);\n\tXil_ExceptionEnable();\n    XScuGic_Connect(&amp;Intc, TIMER_IRPT_INTR,\n                    (Xil_ExceptionHandler)TimerIntrHandler,//set up the timer interrupt\n                    (void *)&amp;Timer);\n\n    XScuGic_Enable(&amp;Intc, TIMER_IRPT_INTR);//enable the interrupt for the Timer at GIC\n    XScuTimer_EnableInterrupt(&amp;Timer);//enable interrupt on the timer\n    XScuTimer_Start(&amp;Timer);\n    return XST_SUCCESS;\n}\n\nint main(void)\n{\n\txil_printf(\"------------START-------------\\\\n\");\n\tint Status=init_timer();\n\tif(Status!=XST_SUCCESS){\n\t\txil_printf(\"Failed to initialize Timer!\\\\n\\\\r\");\n\t\treturn 0;\n\t}\n\n\twhile(1);\n}\n\n</div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">Plain Text<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div>","id":"c264ad53-abd9-5099-a9c1-d9777f9a12ef","name":"Zynq7000私有定时器使用摘要","tags":["Zynq"],"categories":["嵌入式","Zynq7000"],"public_date":"2019-12-04","slug":"489e4390646d4c3a9fd2e2533f9ab849"}},{"node":{"description":"对zynq7000上的3中GPIO使用各做一个demo……","html":"<div data-block-id=\"3af44181-799a-4369-a507-edcce8018ec8\" class=\"notion-selectable notion-table_of_contents-block\" style=\"width: 100%; max-width: 608px; margin-top: 2px; margin-bottom: 4px;\"><div style=\"position: relative;\"><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#d1f54060-cd5a-4c3f-8e0e-332ddd5c75e7\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 0px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">MIO</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#33206361-3a6c-4308-bdca-e98e352d76b7\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 0px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">EMIO</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#209be02b-b648-427d-9296-bcdfe0938e06\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 0px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">AXI GPIO</div></div></div></a></div></div></div><div data-block-id=\"d1f54060-cd5a-4c3f-8e0e-332ddd5c75e7\" class=\"notion-selectable notion-sub_header-block\" id=\"d1f54060-cd5a-4c3f-8e0e-332ddd5c75e7\" style=\"width: 100%; max-width: 608px; margin-top: 1.4em; margin-bottom: 1px; color: rgb(55, 53, 47);\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.5em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 2\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">MIO</div></div></div><div data-block-id=\"f378270f-037e-4f0f-9f5e-84dd89c93b6b\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">直接使用PS部分的MIO。</div></div></div></div><div data-block-id=\"6acd9f0e-5fe9-4fc0-8132-05ab6dab94e7\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">由于MIO属于PS部分，不需要进行块设计，因而不用进行Program FPGA。</div></div></div></div><div data-block-id=\"7f2859fd-62ae-482c-be07-1c5233923966\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">另外，由于MIO上的大部分引脚已被固定，因而可操作的Pins几乎没有，下面仅操作D3这一绿色LED灯使之闪烁。</div></div></div></div><div data-block-id=\"4256ab9b-8711-4525-8fc7-4c9692a84f30\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">SDK代码：</div></div></div></div><div data-block-id=\"7d48e3cd-c616-4964-ad8d-bb82f5636880\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token string\" data-token-index=\"0\">\"xparameters.h\"</span><span class=\"token comment\" data-token-index=\"0\">//硬件参数定义</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token string\" data-token-index=\"0\">\"xgpiops.h\"</span><span class=\"token comment\" data-token-index=\"0\">//PS部分的GPIO的库函数</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token string\" data-token-index=\"0\">\"xil_printf.h\"</span><span class=\"token comment\" data-token-index=\"0\">//串口输出库函数</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token string\" data-token-index=\"0\">\"xstatus.h\"</span><span class=\"token comment\" data-token-index=\"0\">//状态码定义头文件</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token string\" data-token-index=\"0\">\"xplatform_info.h\"</span><span class=\"token comment\" data-token-index=\"0\">//平台定义头文件</span><span data-token-index=\"0\">\n\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">define</span><span class=\"token macro property\" data-token-index=\"0\"> D3_PINNUM 0x00 </span><span class=\"token comment\" data-token-index=\"0\">/*D3的PS GPIO的通道*/</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">define</span><span class=\"token macro property\" data-token-index=\"0\"> SLEEP_DELAY 10000000</span><span class=\"token comment\" data-token-index=\"0\">/**/</span><span data-token-index=\"0\">\n\n</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">main</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\tXGpioPs Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span class=\"token comment\" data-token-index=\"0\">/*GPIO driver的实例*/</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"流水灯开始跑起来吧！\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">//测试目标板子的芯片</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> typeOfboard</span><span class=\"token operator\" data-token-index=\"0\">=</span><span class=\"token function\" data-token-index=\"0\">XGetPlatform_Info</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">switch</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">typeOfboard</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">case</span><span data-token-index=\"0\"> XPLAT_ZYNQ_ULTRA_MP</span><span class=\"token operator\" data-token-index=\"0\">:</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"这是ZYNQ_ULTRA型开发版\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">break</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">case</span><span data-token-index=\"0\"> XPLAT_ZYNQ</span><span class=\"token operator\" data-token-index=\"0\">:</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"这是ZYNQ型开发版\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">break</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">//初始化PS部分的GPIO Driver</span><span data-token-index=\"0\">\n\tXGpioPs_Config</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> cfgPtr</span><span class=\"token operator\" data-token-index=\"0\">=</span><span class=\"token function\" data-token-index=\"0\">XGpioPs_LookupConfig</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XPAR_XGPIOPS_0_DEVICE_ID</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> Status</span><span class=\"token operator\" data-token-index=\"0\">=</span><span class=\"token function\" data-token-index=\"0\">XGpioPs_CfgInitialize</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">cfgPtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">cfgPtr</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">BaseAddr</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XST_SUCCESS</span><span class=\"token operator\" data-token-index=\"0\">!=</span><span data-token-index=\"0\">Status</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"您PS部分的GPIO Driver好像初始化失败呢！\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">return</span><span data-token-index=\"0\"> XST_FAILURE</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">//设置GPIO Driver的某通道的all pins为输出</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">XGpioPs_SetDirectionPin</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">D3_PINNUM</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span class=\"token number\" data-token-index=\"0\">0x01</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">//允许all pins能够输出</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">XGpioPs_SetOutputEnablePin</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">D3_PINNUM</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span class=\"token number\" data-token-index=\"0\">0X01</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">XGpioPs_WritePin</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">D3_PINNUM</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span class=\"token number\" data-token-index=\"0\">0x00</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span class=\"token comment\" data-token-index=\"0\">//全亮</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">volatile</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> Delay</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span class=\"token comment\" data-token-index=\"0\">//volatile声明其为易变的变量，编译器不优化。</span><span data-token-index=\"0\">\n\tu32 blink_led_pos</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">while</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> i</span><span class=\"token operator\" data-token-index=\"0\">=</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">i</span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span class=\"token number\" data-token-index=\"0\">8</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">i</span><span class=\"token operator\" data-token-index=\"0\">++</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token function\" data-token-index=\"0\">XGpioPs_Write</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">D3_PINNUM</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">i</span><span class=\"token operator\" data-token-index=\"0\">%</span><span class=\"token number\" data-token-index=\"0\">2</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">Delay</span><span class=\"token operator\" data-token-index=\"0\">=</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">Delay</span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span class=\"token number\" data-token-index=\"0\">3</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">SLEEP_DELAY</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">Delay</span><span class=\"token operator\" data-token-index=\"0\">++</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span class=\"token comment\" data-token-index=\"0\">//延时</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">XGpioPs_Write</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">D3_PINNUM</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span class=\"token number\" data-token-index=\"0\">0x00</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span class=\"token comment\" data-token-index=\"0\">//全亮</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">Delay</span><span class=\"token operator\" data-token-index=\"0\">=</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">Delay</span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span class=\"token number\" data-token-index=\"0\">2</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">SLEEP_DELAY</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">Delay</span><span class=\"token operator\" data-token-index=\"0\">++</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">XGpioPs_Write</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">D3_PINNUM</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span class=\"token number\" data-token-index=\"0\">0x01</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span class=\"token comment\" data-token-index=\"0\">//全灭</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"这边提醒您，流水灯成功跑了耶！\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">return</span><span data-token-index=\"0\"> XST_SUCCESS</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"33206361-3a6c-4308-bdca-e98e352d76b7\" class=\"notion-selectable notion-sub_header-block\" id=\"33206361-3a6c-4308-bdca-e98e352d76b7\" style=\"width: 100%; max-width: 608px; margin-top: 1.4em; margin-bottom: 1px; color: rgb(55, 53, 47);\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.5em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 2\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">EMIO</div></div></div><div data-block-id=\"62dc7d29-60de-4669-bf41-73225a07c940\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">EMIO属于PS，却被连接到PL</div></div></div></div><div data-block-id=\"c47ee463-0b2d-4c9d-9606-a4160a691f5e\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">IP 配置</div></div></div></div><div data-block-id=\"ff422b44-1357-4d63-88a8-fe60c2b33a7d\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">关GPIO MIO[可选]，并打开EMIO，位数设置8</div></div></div></div></div><div data-block-id=\"c22b45e8-a163-4f8a-ba65-61f3c304d321\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">关M AXI GPIO Interface[可选]</div></div></div></div></div><div data-block-id=\"7e674665-ad65-420b-8844-0cf917780e3a\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">块设计：</div></div></div></div><div data-block-id=\"a70b0427-fe78-49f8-92a2-213918248242\" class=\"notion-selectable notion-image-block\" style=\"width: 100%; max-width: 800px; align-self: center; margin-top: 0.5em; margin-bottom: 0.5em;\"><div><div style=\"display: flex;\"><div class=\"notion-cursor-default\" style=\"position: relative; overflow: hidden; flex-grow: 1;\"><div style=\"position: relative;\"><div style=\"width: 100%; height: 100%;\"><img src=\"https://www.notion.so/image/https%3A%2F%2Fimg.woyun.ink%2Farticle%2F2019%2F11%2F15%2F2019-11-04_22.13.51.png?table=block&amp;id=a70b0427-fe78-49f8-92a2-213918248242&amp;cache=v2\" style=\"display: block; object-fit: cover; border-radius: 1px; width: 100%; pointer-events: auto;\"></div></div></div></div></div></div><div data-block-id=\"a939c962-3516-4426-acb1-fe233ae11bde\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">生成bitstream文件后，打开SDK新建项目。</div></div></div></div><div data-block-id=\"44861386-2f7d-449e-8264-8b26dd8ed0ff\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">SDK代码：</div></div></div></div><div data-block-id=\"74bc199d-f792-4b70-ad7c-72237b6af737\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token string\" data-token-index=\"0\">\"xparameters.h\"</span><span class=\"token comment\" data-token-index=\"0\">//硬件参数定义</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token string\" data-token-index=\"0\">\"xgpiops.h\"</span><span class=\"token comment\" data-token-index=\"0\">//PS部分的GPIO的库函数</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token string\" data-token-index=\"0\">\"xil_printf.h\"</span><span class=\"token comment\" data-token-index=\"0\">//串口输出库函数</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token string\" data-token-index=\"0\">\"xstatus.h\"</span><span class=\"token comment\" data-token-index=\"0\">//状态码定义头文件</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token string\" data-token-index=\"0\">\"xplatform_info.h\"</span><span class=\"token comment\" data-token-index=\"0\">//平台定义头文件</span><span data-token-index=\"0\">\n\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">define</span><span class=\"token macro property\" data-token-index=\"0\"> LED_BANK 0x02 </span><span class=\"token comment\" data-token-index=\"0\">/*流水灯的PS GPIO的通道*/</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">define</span><span class=\"token macro property\" data-token-index=\"0\"> SLEEP_DELAY 10000000</span><span class=\"token comment\" data-token-index=\"0\">/**/</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">define</span><span class=\"token macro property\" data-token-index=\"0\"> LED_POS 0x01 </span><span class=\"token comment\" data-token-index=\"0\">/*指向第几号流水灯*/</span><span data-token-index=\"0\">\n\n</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">main</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\tXGpioPs Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span class=\"token comment\" data-token-index=\"0\">/*GPIO driver的实例*/</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"流水灯开始跑起来吧！\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">//测试目标板子的芯片</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> typeOfboard</span><span class=\"token operator\" data-token-index=\"0\">=</span><span class=\"token function\" data-token-index=\"0\">XGetPlatform_Info</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">switch</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">typeOfboard</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">case</span><span data-token-index=\"0\"> XPLAT_ZYNQ_ULTRA_MP</span><span class=\"token operator\" data-token-index=\"0\">:</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"这是ZYNQ_ULTRA型开发版\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">break</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">case</span><span data-token-index=\"0\"> XPLAT_ZYNQ</span><span class=\"token operator\" data-token-index=\"0\">:</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"这是ZYNQ型开发版\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">break</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">//初始化PS部分的GPIO Driver</span><span data-token-index=\"0\">\n\tXGpioPs_Config</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> cfgPtr</span><span class=\"token operator\" data-token-index=\"0\">=</span><span class=\"token function\" data-token-index=\"0\">XGpioPs_LookupConfig</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XPAR_XGPIOPS_0_DEVICE_ID</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> Status</span><span class=\"token operator\" data-token-index=\"0\">=</span><span class=\"token function\" data-token-index=\"0\">XGpioPs_CfgInitialize</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">cfgPtr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">cfgPtr</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">BaseAddr</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XST_SUCCESS</span><span class=\"token operator\" data-token-index=\"0\">!=</span><span data-token-index=\"0\">Status</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"您PS部分的GPIO Driver好像初始化失败呢！\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">return</span><span data-token-index=\"0\"> XST_FAILURE</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">//设置GPIO Driver的某通道的all pins为输出</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">XGpioPs_SetDirection</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">LED_BANK</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span class=\"token number\" data-token-index=\"0\">0xFF</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">//允许all pins能够输出</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">XGpioPs_SetOutputEnable</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">LED_BANK</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span class=\"token number\" data-token-index=\"0\">0XFF</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">XGpioPs_Write</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">LED_BANK</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span class=\"token number\" data-token-index=\"0\">0x00</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span class=\"token comment\" data-token-index=\"0\">//全亮</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">volatile</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> Delay</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\tu32 blink_led_pos</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">while</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> i</span><span class=\"token operator\" data-token-index=\"0\">=</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">i</span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span class=\"token number\" data-token-index=\"0\">8</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">i</span><span class=\"token operator\" data-token-index=\"0\">++</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t\tblink_led_pos</span><span class=\"token operator\" data-token-index=\"0\">=</span><span class=\"token operator\" data-token-index=\"0\">~</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">LED_POS</span><span class=\"token operator\" data-token-index=\"0\">&lt;&lt;</span><span data-token-index=\"0\">i</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span class=\"token comment\" data-token-index=\"0\">//让某个灯亮，取反操作</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"blink_led_pos = %x\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">blink_led_pos</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span class=\"token number\" data-token-index=\"0\">0xFF</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token function\" data-token-index=\"0\">XGpioPs_Write</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">LED_BANK</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">blink_led_pos</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">Delay</span><span class=\"token operator\" data-token-index=\"0\">=</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">Delay</span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span class=\"token number\" data-token-index=\"0\">3</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">SLEEP_DELAY</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">Delay</span><span class=\"token operator\" data-token-index=\"0\">++</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span class=\"token comment\" data-token-index=\"0\">//延时</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">XGpioPs_Write</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">LED_BANK</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span class=\"token number\" data-token-index=\"0\">0x00</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span class=\"token comment\" data-token-index=\"0\">//全亮</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">Delay</span><span class=\"token operator\" data-token-index=\"0\">=</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">Delay</span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span class=\"token number\" data-token-index=\"0\">2</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">SLEEP_DELAY</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">Delay</span><span class=\"token operator\" data-token-index=\"0\">++</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">XGpioPs_Write</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">LED_BANK</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span class=\"token number\" data-token-index=\"0\">0xFF</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span class=\"token comment\" data-token-index=\"0\">//全灭</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"这边提醒您，流水灯成功跑了耶！\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">return</span><span data-token-index=\"0\"> XST_SUCCESS</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"209be02b-b648-427d-9296-bcdfe0938e06\" class=\"notion-selectable notion-sub_header-block\" id=\"209be02b-b648-427d-9296-bcdfe0938e06\" style=\"width: 100%; max-width: 608px; margin-top: 1.4em; margin-bottom: 1px; color: rgb(55, 53, 47);\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.5em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 2\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">AXI GPIO</div></div></div><div data-block-id=\"6b64c3ff-df33-4245-bbf7-57b464988018\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">IP配置：</div></div></div></div><div data-block-id=\"4808d299-55bd-46fc-9831-b71524505fea\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">关掉GPIO MIO和EMIO[可选]</div></div></div></div></div><div data-block-id=\"77019ee4-30ee-425f-94d3-957f33f771e6\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">打开AXI GPIO Interface</div></div></div></div></div><div data-block-id=\"888aa17f-d71f-4d27-bfc2-ab7206f113b9\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">块设计：</div></div></div></div><div data-block-id=\"bb86050c-4476-4ff0-a817-e19725ff5938\" class=\"notion-selectable notion-image-block\" style=\"width: 100%; max-width: 800px; align-self: center; margin-top: 0.5em; margin-bottom: 0.5em;\"><div><div style=\"display: flex;\"><div class=\"notion-cursor-default\" style=\"position: relative; overflow: hidden; flex-grow: 1;\"><div style=\"position: relative;\"><div style=\"width: 100%; height: 100%;\"><img src=\"https://www.notion.so/image/https%3A%2F%2Fimg.woyun.ink%2Farticle%2F2019%2F11%2F15%2F2019-11-05_00.54.52.jpg?table=block&amp;id=bb86050c-4476-4ff0-a817-e19725ff5938&amp;cache=v2\" style=\"display: block; object-fit: cover; border-radius: 1px; width: 100%; pointer-events: auto;\"></div></div></div></div></div></div><div data-block-id=\"a59e61fb-657b-428f-b43d-fc2473db8069\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">SDK代码：</div></div></div></div><div data-block-id=\"3864ef4e-5fcb-41c4-a89b-84d28ab4f3d0\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 0px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token string\" data-token-index=\"0\">\"xparameters.h\"</span><span class=\"token comment\" data-token-index=\"0\">//硬件参数定义</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token string\" data-token-index=\"0\">\"xgpio.h\"</span><span class=\"token comment\" data-token-index=\"0\">//GPIO库函数</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"xil_printf.h\"</span><span class=\"token comment\" data-token-index=\"0\">//串口输出库函数</span><span data-token-index=\"0\">\n\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">define</span><span class=\"token macro property\" data-token-index=\"0\"> WATERFALL_LED_CHANNEL 1 </span><span class=\"token comment\" data-token-index=\"0\">/*流水灯的GPIO的通道*/</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">define</span><span class=\"token macro property\" data-token-index=\"0\"> SLEEP_DELAY 10000000</span><span class=\"token comment\" data-token-index=\"0\">/**/</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">define</span><span class=\"token macro property\" data-token-index=\"0\"> LED_POS 0x01 </span><span class=\"token comment\" data-token-index=\"0\">/*指向第几号流水灯*/</span><span data-token-index=\"0\">\n\n</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">main</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\tXGpio Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span class=\"token comment\" data-token-index=\"0\">/*GPIO driver的实例*/</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"流水灯开始跑起来吧！\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">//初始化GPIO Driver</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> Status</span><span class=\"token operator\" data-token-index=\"0\">=</span><span class=\"token function\" data-token-index=\"0\">XGpio_Initialize</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">XPAR_GPIO_0_DEVICE_ID</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span class=\"token comment\" data-token-index=\"0\">//设备ID在xparameters.h中查看</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">XST_SUCCESS</span><span class=\"token operator\" data-token-index=\"0\">!=</span><span data-token-index=\"0\">Status</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"您的GPIO Driver好像初始化失败呢！\"</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">return</span><span data-token-index=\"0\"> XST_FAILURE</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">//设置GPIO Driver的某通道为输出</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">XGpio_SetDataDirection</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">WATERFALL_LED_CHANNEL</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">volatile</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> Delay</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> j</span><span class=\"token operator\" data-token-index=\"0\">=</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\tu32 blink_led_pos</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">while</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">++</span><span data-token-index=\"0\">j</span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span class=\"token number\" data-token-index=\"0\">4</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> i</span><span class=\"token operator\" data-token-index=\"0\">=</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">i</span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span class=\"token number\" data-token-index=\"0\">8</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">i</span><span class=\"token operator\" data-token-index=\"0\">++</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t\tblink_led_pos</span><span class=\"token operator\" data-token-index=\"0\">=</span><span class=\"token operator\" data-token-index=\"0\">~</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">LED_POS</span><span class=\"token operator\" data-token-index=\"0\">&lt;&lt;</span><span data-token-index=\"0\">i</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span class=\"token comment\" data-token-index=\"0\">//让某个灯亮，取反操作</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"blink_led_pos = %x\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">blink_led_pos</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span class=\"token number\" data-token-index=\"0\">0xFF</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token function\" data-token-index=\"0\">XGpio_DiscreteWrite</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">WATERFALL_LED_CHANNEL</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">blink_led_pos</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">Delay</span><span class=\"token operator\" data-token-index=\"0\">=</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">Delay</span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span class=\"token number\" data-token-index=\"0\">2</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">SLEEP_DELAY</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">Delay</span><span class=\"token operator\" data-token-index=\"0\">++</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span class=\"token comment\" data-token-index=\"0\">//延时</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\n\t</span><span class=\"token function\" data-token-index=\"0\">XGpio_DiscreteWrite</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">WATERFALL_LED_CHANNEL</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span class=\"token number\" data-token-index=\"0\">0x00</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span class=\"token comment\" data-token-index=\"0\">//全亮</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">Delay</span><span class=\"token operator\" data-token-index=\"0\">=</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">Delay</span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span class=\"token number\" data-token-index=\"0\">2</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">SLEEP_DELAY</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">Delay</span><span class=\"token operator\" data-token-index=\"0\">++</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">XGpio_DiscreteWrite</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">Gpio</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">WATERFALL_LED_CHANNEL</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span class=\"token number\" data-token-index=\"0\">0xFF</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span class=\"token comment\" data-token-index=\"0\">//全灭</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">xil_printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"这边提醒您，流水灯成功跑了耶！\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">return</span><span data-token-index=\"0\"> XST_SUCCESS</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div>","id":"323955c7-a2f7-5203-84a5-c5dde32c81b5","name":"Zynq7000三种GPIO的使用之点亮流水灯摘要","tags":["Zynq"],"categories":["嵌入式","Zynq7000"],"public_date":"2019-12-02","slug":"bf5433f32eea422ba810de75ec304eba"}}],"totalCount":3}},"pageContext":{"tag":"Zynq"}},"staticQueryHashes":["51046549"]}