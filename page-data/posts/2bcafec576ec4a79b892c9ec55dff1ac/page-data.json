{"componentChunkName":"component---plugins-gine-theme-mod-src-components-post-blog-post-js","path":"/posts/2bcafec576ec4a79b892c9ec55dff1ac","result":{"data":{"siteConfig":{"title":"IGNORANT","commentOpen":true},"posts":{"public_date":"2019-04-18","status":"published","description":null,"name":"操作系统实验——线程创建与调度","tags":["underlying"],"categories":["Underlying Study"],"html":"<div data-block-id=\"9b949b6b-52e5-4908-b318-497a83c4b177\" class=\"notion-selectable notion-table_of_contents-block\" style=\"width: 100%; max-width: 608px; margin-top: 2px; margin-bottom: 4px;\"><div style=\"position: relative;\"><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#fd656702-dd2b-45af-9bff-38411df631bb\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 0px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">实验目的</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#9672a5bb-fe32-4700-9093-caec8bca1247\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 0px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">实验内容</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#2316f25e-f8d9-474d-bcff-3f747daa9d18\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 0px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">预备知识</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#68d7b51a-50ec-4bf3-a12f-8b19d7f0a8ca\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">线程API</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#d544c5f0-db54-4b50-a050-8968bf01409c\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">随机数组生成</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#64a129e2-cffb-4691-a678-7c96f336d490\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">图形模式API</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#fee2c4ae-6042-4525-b5b2-223992d47546\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">线程调度</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#1496b3c7-7b5d-4188-b19c-756fddef4b81\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">关于定点数</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#9665ba2a-c96b-49b1-9d8b-40c0f8fb3614\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 0px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">实验步骤</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#259a6612-bd61-4177-8d6f-6a85fc8f3f57\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">增加tcb属性nice</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#c63eb00c-7f67-498f-82ef-f80fcd4ec3e3\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">增加系统调用</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#e4534dcd-2ed1-42ac-b512-4f83bc63293e\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">tcb增加动态优先级属性</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#9a9d4be9-c306-44c2-a3b5-535407d12693\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">优先级调度算法</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#0ae670c0-d625-4ab8-8c60-4d18758a6fd8\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 24px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">测试调度器</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#14e97d76-9f8b-42fa-b889-87734b72d230\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 0px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">实验结果</div></div></div></a></div><div style=\"color: rgba(55, 53, 47, 0.6); fill: rgba(55, 53, 47, 0.6);\"><a href=\"#2566c064-bf64-47d5-900b-1bfd3084a385\" rel=\"noopener noreferrer\" style=\"display: block; color: inherit; text-decoration: none;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; width: 100%;\"><div style=\"padding: 6px 2px; font-size: 14px; line-height: 1.3; display: flex; align-items: center; margin-left: 0px;\"><div class=\"notranslate\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background-image: linear-gradient(to right, rgba(55, 53, 47, 0.16) 0%, rgba(55, 53, 47, 0.16) 100%); background-repeat: repeat-x; background-position: 0px 100%; background-size: 100% 1px;\">总结</div></div></div></a></div></div></div><div data-block-id=\"7d32fee0-a28e-40b1-9182-90c98fe68edb\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; min-height: 1em; color: rgb(55, 53, 47); -webkit-text-fill-color: rgba(55, 53, 47, 0.4);\"></div></div></div></div><div data-block-id=\"5167cb57-00c9-4da5-bb67-897e2ad84190\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">说明：</div></div></div></div><div data-block-id=\"ddcb8886-3a48-4e24-a073-f1e7570c4d2e\" class=\"notion-selectable notion-quote-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"font-size: 1.2em; padding: 3px 2px; color: inherit; fill: inherit; display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Empty quote\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); border-left: 3px solid currentcolor; padding-left: 0.9em; padding-right: 0.9em;\">最近做了实验二和实验三，由于两者相关，所以堆在一起总结。\n另外注意到，各个bbs上也流传着往届学长写的总结，这也是老师只甩给我们PPT，我们也能做出这实验的原因之一。\n在此呢，我就写写自己的总结，当然也参考了往届学长的做法（，并且还把老师的PPT抄了一遍）。</div></div></div><div data-block-id=\"fd656702-dd2b-45af-9bff-38411df631bb\" class=\"notion-selectable notion-sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1.4em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"fd656702-dd2b-45af-9bff-38411df631bb\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.5em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 2\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">实验目的</div></div></div><div data-block-id=\"f22a1d21-e3bc-43ce-a8c0-f37e500cd636\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">掌握线程的创建</div></div></div></div></div><div data-block-id=\"b9d34b35-2699-497d-aec2-b3d9a92662c8\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">掌握线程的调度</div></div><div data-block-id=\"2e8e5af1-a9ca-4285-a9d1-4f551c5fdcca\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 100%; margin-top: 2px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">静态优先级调度</div></div></div></div></div><div data-block-id=\"bf6ac673-043b-402f-a2a1-ec1411a2a32b\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 100%; margin-top: 1px; margin-bottom: 0px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">动态优先级调度</div></div></div></div></div></div></div></div><div data-block-id=\"9672a5bb-fe32-4700-9093-caec8bca1247\" class=\"notion-selectable notion-sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1.4em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"9672a5bb-fe32-4700-9093-caec8bca1247\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.5em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 2\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">实验内容</div></div></div><div data-block-id=\"ab78abcb-d5d2-4241-a582-30fcaef9cede\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">先贴实验内容：（EPOS系统，我会在上篇文章的实验一给出）</div></div></div></div><div data-block-id=\"45e55660-c2d1-4ae4-87b8-d60db982e72d\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">创建两个冒泡排序的线程，记为A和B</div></div><div data-block-id=\"005c76ee-6f3a-4cf1-a7d5-8f63c6ba418c\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 100%; margin-top: 2px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">分别占用屏幕的两个位置</div></div></div></div></div><div data-block-id=\"b1cea5e8-0b0e-4cca-86e9-2f6815ab5f45\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 100%; margin-top: 1px; margin-bottom: 0px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">在屏幕上用进度条动态显示两个线程的静态优先级</div></div></div></div></div></div></div></div><div data-block-id=\"edbc058b-1816-4667-beee-cc324da90bbd\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">另外创建一个控制线程</div></div><div data-block-id=\"24d6274c-f9f1-457e-a13f-fc435f922462\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 100%; margin-top: 2px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">循环等待键盘输入</div></div><div data-block-id=\"bbbe26e5-83f5-4f1c-8d93-f7e07c77baae\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 100%; margin-top: 2px; margin-bottom: 0px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">int key = getchar();</span></div></div></div></div></div></div></div></div><div data-block-id=\"8e899d04-03e1-459f-9806-0980ce24775d\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 100%; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">如果key==0x4800(up)/0x5000(down)</div></div><div data-block-id=\"5eb12efc-1131-43cd-95a4-22b0f251e23b\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 100%; margin-top: 2px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">调用<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">setpriority</span>调高/低A线程的静态优先级</div></div></div></div></div><div data-block-id=\"f38a1c7e-1d7a-4c4b-830b-a33d1faf3688\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 100%; margin-top: 1px; margin-bottom: 0px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">更新A的优先级进度条</div></div></div></div></div></div></div></div><div data-block-id=\"6adf042b-6dfb-46d0-b40f-27b0e91eb43d\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 100%; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">如果key==0x4d00(right)/0x4b00(left)</div></div><div data-block-id=\"2ce8a703-86ab-49d8-bc76-235892807945\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 100%; margin-top: 2px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">调用<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">setpriority</span>调高/低B线程的静态优先级</div></div></div></div></div><div data-block-id=\"5c3e4471-d9de-4ab2-b243-35d2518e267d\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 100%; margin-top: 1px; margin-bottom: 0px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">更新B的优先级进度条</div></div></div></div></div></div></div></div><div data-block-id=\"bee788ae-eda3-4947-8036-8b40a4be4bb6\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 100%; margin-top: 1px; margin-bottom: 0px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">把控制线程的静态优先级设置到最高，以保证控制效果</div></div></div></div></div></div></div></div><div data-block-id=\"2316f25e-f8d9-474d-bcff-3f747daa9d18\" class=\"notion-selectable notion-sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1.4em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"2316f25e-f8d9-474d-bcff-3f747daa9d18\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.5em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 2\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">预备知识</div></div></div><div data-block-id=\"68d7b51a-50ec-4bf3-a12f-8b19d7f0a8ca\" class=\"notion-selectable notion-sub_sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"68d7b51a-50ec-4bf3-a12f-8b19d7f0a8ca\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">线程API</div></div></div><div data-block-id=\"1ed72379-5e6c-4cc8-9e5d-ce7eea4eb87c\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">下面说明实验所用到的API函数。\n<span style=\"font-weight:600\" data-token-index=\"1\">线程创建</span></div></div></div></div><div data-block-id=\"2127c712-015b-4f50-8b0f-38f5b102fe7e\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">task_create</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">tos</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">func</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">pv</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">pv</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"d68bd0be-4994-49da-95dc-71b52b135813\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">tos</span> ：用户栈的栈顶指针\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"2\">func</span> ：线程函数\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"4\">pv</span> ：传递给线程函数func的参数，一般传结构体指针以传多个参数\n返回值 ：大于0，则表示新创建线程之ID</div></div></div></div><div data-block-id=\"a6a5e01a-ba24-4ea3-8ab0-88d0288ee8b7\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\"><span style=\"font-weight:600\" data-token-index=\"0\">线程退出</span></div></div></div></div><div data-block-id=\"6cd14e96-d555-4020-b23e-4fcd5a2178f6\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">task_exit</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> code_exit</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"3603535c-80ee-418f-b657-f4e1a2d941c2\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">code_exit</span> ：线程的退出代码</div></div></div></div><div data-block-id=\"a601f9ce-4274-4266-8282-caa18ce5f2a2\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\"><span style=\"font-weight:600\" data-token-index=\"0\">获取当前线程的ID</span></div></div></div></div><div data-block-id=\"f3fdd67a-7066-46a9-b52d-7a32d31f1e6f\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">task_getid</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"586b4998-49b3-485a-9cf4-7194446236ef\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\"><span style=\"font-weight:600\" data-token-index=\"0\">等待线程退出</span></div></div></div></div><div data-block-id=\"2f8c5fb3-f80c-4531-808a-f4ac7387aed2\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">task_wait</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> tid</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">pcode_exit</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"0175d101-2ebd-4306-8ab4-b60ee1bebf0e\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">tid</span> ：要等待线程之ID\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"2\">pcode_exit</span> ：如果非NULL，用于保存线程tid的退出代码</div></div></div></div><div data-block-id=\"69231eba-7b9c-4e79-b8ea-d274696be7a3\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">Sample:</div></div></div></div><div data-block-id=\"46c63991-4408-400f-b3aa-24c84a751bf4\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token comment\" data-token-index=\"0\">// Define thread function</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">tsk_foo</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> pv</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"This is task foo with tid=%d\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">task_getid</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">// exit this task</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">task_exit</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">main</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">unsigned</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> st_Size </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1024</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1024</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">// alloc user stack</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">unsigned</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">char</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> stack_foo </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">unsigned</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">char</span><span class=\"token operator\" data-token-index=\"0\">*</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token function\" data-token-index=\"0\">malloc</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">st_Size</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">// create thread</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> tid_foo </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">task_create</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">stack_foo </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> st_Size</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> tsk_foo</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> pv</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">// waiting for the quiting of threads</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">task_wait</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">tid_foo</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token constant\" data-token-index=\"0\">NULL</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">// release the memory</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">free</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">stack_foo</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"d544c5f0-db54-4b50-a050-8968bf01409c\" class=\"notion-selectable notion-sub_sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"d544c5f0-db54-4b50-a050-8968bf01409c\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">随机数组生成</div></div></div><div data-block-id=\"8d51301f-5f85-41c0-bfc9-a2f086b60189\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">RandDemo</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">srand</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token function\" data-token-index=\"0\">time</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token constant\" data-token-index=\"0\">NULL</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\t</span><span class=\"token comment\" data-token-index=\"0\">// Use current time as seed for random generator</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> i</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">i </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> i </span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span data-token-index=\"0\"> n</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> i</span><span class=\"token operator\" data-token-index=\"0\">++</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token comment\" data-token-index=\"0\">//generate elements are between 0~max_Elem</span><span data-token-index=\"0\">\n\t\tarray</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span data-token-index=\"0\">i</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">==</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">rand</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">%</span><span data-token-index=\"0\"> max_Elem</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\t\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"64a129e2-cffb-4691-a678-7c96f336d490\" class=\"notion-selectable notion-sub_sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"64a129e2-cffb-4691-a678-7c96f336d490\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">图形模式API</div></div></div><div data-block-id=\"a5645d5b-4fa8-4939-908e-fb995d852b96\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">下面说明本实验可能用到的API函数。\n<span style=\"font-weight:600\" data-token-index=\"1\">获取当前系统支持的图形模式</span></div></div></div></div><div data-block-id=\"5d2df7e3-c8f9-418b-bd28-22d5f6c05cda\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">list_graphic_modes</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"1d20b6c9-9b07-45e8-b446-c66de350e4a9\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">需在文本模式下运行才可看到结果。\n老师PPT参考模式列表：</div></div></div></div><div data-block-id=\"d0ccef70-818f-4e4e-9248-4dbf2ed15fb5\" class=\"notion-selectable notion-image-block\" style=\"width: 100%; max-width: 800px; align-self: center; margin-top: 0.5em; margin-bottom: 0.5em;\"><div><div style=\"display: flex;\"><div class=\"notion-cursor-default\" style=\"position: relative; overflow: hidden; flex-grow: 1;\"><div style=\"position: relative;\"><div style=\"width: 100%; height: 100%;\"><img src=\"https://www.notion.so/image/https%3A%2F%2Fimg.woyun.ink%2Farticle%2F2019%2F4%2F14%2F1555241808071.png?table=block&amp;id=d0ccef70-818f-4e4e-9248-4dbf2ed15fb5&amp;userId=&amp;cache=v2\" style=\"display: block; object-fit: cover; border-radius: 1px; width: 100%; pointer-events: auto;\"></div></div></div></div></div></div><div data-block-id=\"26d0caa2-6dc5-490a-a078-e99da995fb4a\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\"><span style=\"font-weight:600\" data-token-index=\"0\">进入图形模式</span></div></div></div></div><div data-block-id=\"f15ca362-f0e1-40d9-8880-3cdf79495454\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">init_graphic</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> mode</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"e8b618ff-99a4-4a7e-9e45-622d3f6669e8\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">mode</span>: 为上述图形模式对应的值，如<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"2\">int mode=0x100</span></div></div></div></div><div data-block-id=\"23d849eb-bb0e-48b2-ae87-b1ab42155374\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\"><span style=\"font-weight:600\" data-token-index=\"0\">获取屏幕的分辨率</span>\n直接访问变量获取：\n水平：<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"2\">g_graphic_dev.XResolution</span>\n垂直：<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"4\">g_graphic_dev.YResolution</span></div></div></div></div><div data-block-id=\"0ae032d1-1c3d-4c0d-b20b-1a4f30af8b5b\" class=\"notion-selectable notion-quote-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"font-size: 1.2em; padding: 3px 2px; color: inherit; fill: inherit; display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Empty quote\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); border-left: 3px solid currentcolor; padding-left: 0.9em; padding-right: 0.9em;\">注：g_graphic_dev在graphics.h中被声明为一个全局变量，使用时应包含此头文件。</div></div></div><div data-block-id=\"d27ca3b2-e021-435c-b7af-1d55cdff59af\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\"><span style=\"font-weight:600\" data-token-index=\"0\">打像素点</span></div></div></div></div><div data-block-id=\"d7f2d799-3b22-446a-944f-202ef4d4d756\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">setPixel</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> x</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> y</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> COLORREF cr</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"486a779c-bfa3-4713-b534-b8a0b25dec72\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">(x, y)</span>是像素点坐标\n<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"2\">cr</span>是颜色，用宏定义<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"4\">RGB(r,g,b)</span>生成，其中r,g,b的取值范围都是0-255</div></div></div></div><div data-block-id=\"8ddf3975-e038-4f86-8a5a-cc6173dc59e3\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">如何从cr中取出r,g,b？用<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">getXValue(cr)</span>，其中<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">X=R,G,B</span>，如<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"5\">getRValue(cr)</span>取出cr的R分量值。</div></div></div></div><div data-block-id=\"6dbb45b2-ea16-4cde-82ce-f4f044d007ac\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\"><span style=\"font-weight:600\" data-token-index=\"0\">退出图形模式</span></div></div></div></div><div data-block-id=\"24fe77af-5d41-4247-b0b8-2c311bf55d40\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">exit_graphic</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"fee2c4ae-6042-4525-b5b2-223992d47546\" class=\"notion-selectable notion-sub_sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"fee2c4ae-6042-4525-b5b2-223992d47546\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">线程调度</div></div></div><div data-block-id=\"dd380186-1345-4ac7-b55a-cda01b310bfe\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\"><span style=\"font-weight:600\" data-token-index=\"0\">优先级</span></div></div></div></div><div data-block-id=\"fe471b07-0baa-4ea5-8056-7ebb3c4beb67\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">静态优先级(<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">nice</span>)：内核不会修改它，不随时间而变化，除非用户通过系统调用<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">setpriority</span>进行修改。</div></div></div></div></div><div data-block-id=\"8e9b0d04-3de7-4928-be97-7617d3b1d424\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">动态优先级(<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">priority</span>)：内核根据线程使用CPU的状况、静态优先级nice和系统负荷计算出来，会随时间而变。作为最终的调度依据，即调度器只根据动态优先级进行调度。</div></div></div></div></div><div data-block-id=\"c14c1aec-e914-4191-8a6c-58e4ad1b0f37\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\"><span style=\"font-weight:600\" data-token-index=\"0\">线程数据结构</span></div></div></div></div><div data-block-id=\"19a6524d-7c7e-46e1-a08f-e557ded94db2\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">epos的线程数据结构为单向链表：</div></div></div></div><div data-block-id=\"62484bd5-ced5-4e98-a81f-95143527a4e8\" class=\"notion-selectable notion-image-block\" style=\"width: 100%; max-width: 800px; align-self: center; margin-top: 0.5em; margin-bottom: 0.5em;\"><div><div style=\"display: flex;\"><div class=\"notion-cursor-default\" style=\"position: relative; overflow: hidden; flex-grow: 1;\"><div style=\"position: relative;\"><div style=\"width: 100%; height: 100%;\"><img src=\"https://www.notion.so/image/https%3A%2F%2Fimg.woyun.ink%2Farticle%2F2019%2F4%2F14%2F1555248510766.png?table=block&amp;id=62484bd5-ced5-4e98-a81f-95143527a4e8&amp;userId=&amp;cache=v2\" style=\"display: block; object-fit: cover; border-radius: 1px; width: 100%; pointer-events: auto;\"></div></div></div></div></div></div><div data-block-id=\"ff83c69a-a517-4fb4-9c51-14c237cf4b73\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">注意：</div></div></div></div><div data-block-id=\"1de6a725-8037-4209-b2c1-90421d2c8b24\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">在系统启动过程中，<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">g_task_running</span>是<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">NULL</span>！</div></div></div></div></div><div data-block-id=\"0d852930-1bcf-44f9-a01d-0b97aa2956ac\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">task0(tid=0)</span>是系统空闲线程（system idle thread），当没有其他线程可运行时，才运行<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"2\">task0</span>!</div></div></div></div></div><div data-block-id=\"1496b3c7-7b5d-4188-b19c-756fddef4b81\" class=\"notion-selectable notion-sub_sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"1496b3c7-7b5d-4188-b19c-756fddef4b81\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">关于定点数</div></div></div><div data-block-id=\"5ae281c2-b5de-4e5e-919a-c9dd8f0c96e9\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">本次实验为追求性能采用了定点数去定义一部分变量。</div></div></div></div><div data-block-id=\"82d80d46-6e45-43f1-b5f2-c25b5ba0e055\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">浮点(float-point)表示 ：精度高，性能差！</div></div></div></div></div><div data-block-id=\"970d61da-b5fe-45f6-a6f5-e6fc37590ff1\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">定点(fixed-point)表示：精度低，性能好！</div></div></div></div></div><div data-block-id=\"4f5e4fc8-e6e2-4b24-acb3-b4bdf40601d9\" class=\"notion-selectable notion-quote-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"font-size: 1.2em; padding: 3px 2px; color: inherit; fill: inherit; display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Empty quote\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); border-left: 3px solid currentcolor; padding-left: 0.9em; padding-right: 0.9em;\">注：文件fixedptc.h中定义了定点数类型fixedpt及其运算，所以使用时需包含该头文件</div></div></div><div data-block-id=\"655b1e07-2344-4f2b-a5c4-1c3c0832f5e1\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">另外，阅读往届学长的实验报告，发现代码中出现很多的<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">fixedpt_mul(,)</span>、<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">fixedpt_div(,)</span>、<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"5\">fixedpt_add(,)</span>、<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"7\">fixedpt_sub(,)</span>、<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"9\">fixedpt_fromint(,)</span>、<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"11\">fixedpt_toint(,)</span>、<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"13\">FIXEDPT_ONE</span>……这是出于对性能的考虑。\n但其中<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"15\">fixedpt_add(,)</span>、<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"17\">fixedpt_sub(,)</span>的宏定义如下：</div></div></div></div><div data-block-id=\"575ac90d-5b2a-4245-8637-f8729a31a772\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">define</span><span class=\"token macro property\" data-token-index=\"0\"> fixedpt_add(A,B) ((A) + (B))</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">define</span><span class=\"token macro property\" data-token-index=\"0\"> fixedpt_sub(A,B) ((A) - (B)</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"1214096d-f256-4076-ad37-1b3efb06f8ea\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">因此定点加减法可直接使用<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">+、-</span>，因为没任何性能提升，反而让代码像a piece of shit。</div></div></div></div><div data-block-id=\"9665ba2a-c96b-49b1-9d8b-40c0f8fb3614\" class=\"notion-selectable notion-sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1.4em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"9665ba2a-c96b-49b1-9d8b-40c0f8fb3614\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.5em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 2\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">实验步骤</div></div></div><div data-block-id=\"259a6612-bd61-4177-8d6f-6a85fc8f3f57\" class=\"notion-selectable notion-sub_sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"259a6612-bd61-4177-8d6f-6a85fc8f3f57\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">增加tcb属性nice</div></div></div><div data-block-id=\"090b5036-e284-49c7-8259-6fba4939a398\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">说明：</div></div></div></div><div data-block-id=\"5897c638-64b0-4384-bc22-7e355cf698bb\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">nice</span>是整数，取值范围<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"2\">[-NZERO, NZERO-1]</span>，值越小优先级越高</div></div></div></div></div><div data-block-id=\"77d24166-defc-4fd6-9533-bc77549fe52a\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">#define NZERO 20</span></div></div></div></div></div><div data-block-id=\"e5d0f18f-509b-41c2-a125-bd42ddeeb643\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">①\\kernel\\kernel.h中，为线程数据结构<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">struct tcb</span>线程的静态优先级<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">nice</span>属性。</div></div></div></div><div data-block-id=\"818328b8-4621-4364-8f54-4be1831522c6\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token keyword\" data-token-index=\"0\">struct</span><span data-token-index=\"0\"> </span><span class=\"token class-name\" data-token-index=\"0\">tcb</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t……\n    </span><span class=\"token keyword\" data-token-index=\"0\">struct</span><span data-token-index=\"0\"> </span><span class=\"token class-name\" data-token-index=\"0\">fpu</span><span data-token-index=\"0\"> fpu</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span class=\"token comment\" data-token-index=\"0\">//数学协处理器的寄存器</span><span data-token-index=\"0\">\n    </span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> nice</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">   </span><span class=\"token comment\" data-token-index=\"0\">//static priority</span><span data-token-index=\"0\">\n\n    uint32_t signature</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span class=\"token comment\" data-token-index=\"0\">//必须是最后一个字段</span><span data-token-index=\"0\">\n\t……\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"483b65a7-5df1-48d4-bd67-bfecf265ba45\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">②在\\kernel\\task.c中，函数<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">sys_task_create</span>中初始化<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">nice=0</span>。</div></div></div></div><div data-block-id=\"cfc17748-8f0c-489f-ad24-2a39e7506086\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token keyword\" data-token-index=\"0\">struct</span><span data-token-index=\"0\"> </span><span class=\"token class-name\" data-token-index=\"0\">tcb</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">sys_task_create</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> tos</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\">func</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> pv</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">void</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> pv</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t……\n\tnew</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">signature </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> TASK_SIGNATURE</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\n\tnew</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">nice </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">  </span><span class=\"token comment\" data-token-index=\"0\">// initialize the static priority</span><span data-token-index=\"0\">\n\t……\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"c63eb00c-7f67-498f-82ef-f80fcd4ec3e3\" class=\"notion-selectable notion-sub_sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"c63eb00c-7f67-498f-82ef-f80fcd4ec3e3\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">增加系统调用</div></div></div><div data-block-id=\"614420b0-0933-4e22-8f64-c03fada3ef30\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">系统调用说明：</div></div></div></div><div data-block-id=\"e58ab9fe-92e6-4645-8cb4-d60e0d53bbf9\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">int getpriority(int tid)</span></div></div><div data-block-id=\"32e9f47a-0a82-4960-9325-5907ad99d88f\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 100%; margin-top: 2px; margin-bottom: 0px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">成功返回(<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">nice+NZERO</span>)，失败返回-1</div></div></div></div></div></div></div></div><div data-block-id=\"e56ab80a-411f-4809-b6e4-e5186fe450ce\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">int setpriority(int tid, int prio)</span></div></div><div data-block-id=\"ad075921-1553-4f10-a95a-665305a4a9ad\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 100%; margin-top: 2px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">把线程tid的<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">nice</span>设为(<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">prio-NZERO</span>)</div></div></div></div></div><div data-block-id=\"1c08d4b9-04a5-45e4-aeab-f85a23aeddfd\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 100%; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">prio</span>必须在<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"2\">[0,2*NZERO-1]</span></div></div></div></div></div><div data-block-id=\"77264478-98c1-40ea-8b7e-dc211d8e687a\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 100%; margin-top: 1px; margin-bottom: 0px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">成功返回0，失败返回-1</div></div></div></div></div></div></div></div><div data-block-id=\"9b5c59b1-685d-45ae-9fd7-23449a79170a\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">①按照实验一，增加系统调用<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">getpriority</span> ,<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">setpriority</span>,\n大致步骤略述：</div></div></div></div><div data-block-id=\"fd6b3e6b-b92b-4adb-b42d-3977520deb08\" class=\"notion-selectable notion-numbered_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><span>1.</span></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">\\userapp\\include\\syscall.h</span> 声明系统调用API</div></div></div></div></div><div data-block-id=\"ffbc5858-487c-4a2a-88e9-73844d1c5c68\" class=\"notion-selectable notion-numbered_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><span>2.</span></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">\\userapp\\lib\\syscall-wrapper.S</span> 定义封装例程</div></div></div></div></div><div data-block-id=\"870dc8bb-a2b8-467b-b1a4-8b7e5b592438\" class=\"notion-selectable notion-numbered_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><span>3.</span></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">\\include\\syscall-nr.h</span> 定义系统调用号</div></div></div></div></div><div data-block-id=\"69dccb60-e5fe-4a56-9d23-80e182686a25\" class=\"notion-selectable notion-numbered_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><span>4.</span></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">\\kernel\\kernel.h</span> 声明系统调用服务例程函数<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"2\">sys_setpriority</span>、<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"4\">sys_getpriority</span></div></div></div></div></div><div data-block-id=\"d5dafae8-50be-42c8-ba19-f1a881546e83\" class=\"notion-selectable notion-numbered_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><span>5.</span></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">\\kernel\\machdep.c</span> 实现两个系统调用服务例程函数。</div></div></div></div></div><div data-block-id=\"82dca370-4163-4c48-8876-2b763e627ca9\" class=\"notion-selectable notion-numbered_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><span>6.</span></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">\\kernel\\machdep.c</span> 在系统调用分发函数<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"2\">syscall()</span>中根据系统调用号加入<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"4\">SYSCALL_xxx</span>分支。</div></div></div></div></div><div data-block-id=\"36d3db69-db64-4d13-817a-1ae4330fa3ec\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">②主要代码：\nsyscall()分发函数中添加分支：</div></div></div></div><div data-block-id=\"e9fa9ad4-01bc-4189-a664-0bb1c8aaf4cf\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token keyword\" data-token-index=\"0\">switch</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">ctx</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">eax</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t……\n\t</span><span class=\"token keyword\" data-token-index=\"0\">case</span><span data-token-index=\"0\"> SYSCALL_getpriority</span><span class=\"token operator\" data-token-index=\"0\">:</span><span data-token-index=\"0\"> \n\t</span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> ttid </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span class=\"token operator\" data-token-index=\"0\">*</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">ctx</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">esp </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">4</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\tctx</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">eax </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">sys_getpriority</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">ttid</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">break</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">case</span><span data-token-index=\"0\"> SYSCALL_setpriority</span><span class=\"token operator\" data-token-index=\"0\">:</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> ttid </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span class=\"token operator\" data-token-index=\"0\">*</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">ctx</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">esp </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">4</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> pprio </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span class=\"token operator\" data-token-index=\"0\">*</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">ctx</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">esp </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">8</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\tctx</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">eax </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">sys_setpriority</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">ttid</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> pprio</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">break</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t……\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"97ad7f07-eef5-4ba2-8d3d-6670c70af346\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">系统调用服务例程函数的实现：</div></div></div></div><div data-block-id=\"344bc962-01c3-4887-abb4-1ffd308c520a\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token keyword\" data-token-index=\"0\">struct</span><span data-token-index=\"0\"> </span><span class=\"token class-name\" data-token-index=\"0\">tcb</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">GetSelectedTcb</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">tid</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">struct</span><span data-token-index=\"0\"> </span><span class=\"token class-name\" data-token-index=\"0\">tcb</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> selected_Tcb</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">tid</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">  </span><span class=\"token comment\" data-token-index=\"0\">// tid!=1</span><span data-token-index=\"0\">\n\t\tuint32_t flags</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token function\" data-token-index=\"0\">save_flags_cli</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">flags</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">  </span><span class=\"token comment\" data-token-index=\"0\">// avoid interrupting</span><span data-token-index=\"0\">\n\t\tselected_Tcb </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> g_task_head</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token comment\" data-token-index=\"0\">// find the tcb whose tid == tid</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">while</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">selected_Tcb </span><span class=\"token operator\" data-token-index=\"0\">!=</span><span data-token-index=\"0\"> </span><span class=\"token constant\" data-token-index=\"0\">NULL</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">selected_Tcb</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">tid </span><span class=\"token operator\" data-token-index=\"0\">==</span><span data-token-index=\"0\"> tid</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">break</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\tselected_Tcb </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> selected_Tcb</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">next</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token function\" data-token-index=\"0\">restore_flags</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">flags</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">else</span><span data-token-index=\"0\">  </span><span class=\"token comment\" data-token-index=\"0\">// tid==0,return current tcb</span><span data-token-index=\"0\">\n\t\tselected_Tcb </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> g_task_running</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">return</span><span data-token-index=\"0\"> selected_Tcb</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">sys_getpriority</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> tid</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">struct</span><span data-token-index=\"0\"> </span><span class=\"token class-name\" data-token-index=\"0\">tcb</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> selected_Tcb </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">GetSelectedTcb</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">tid</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">return</span><span data-token-index=\"0\"> selected_Tcb </span><span class=\"token operator\" data-token-index=\"0\">!=</span><span data-token-index=\"0\"> </span><span class=\"token constant\" data-token-index=\"0\">NULL</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">?</span><span data-token-index=\"0\"> selected_Tcb</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">nice </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> NZERO </span><span class=\"token operator\" data-token-index=\"0\">:</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">-</span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\n</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">sys_setpriority</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> tid</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> prio</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> op_Result </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">  </span><span class=\"token comment\" data-token-index=\"0\">// if failed,return -1, otherwise 0</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> valid_Prio </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> prio </span><span class=\"token operator\" data-token-index=\"0\">&gt;</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">&amp;&amp;</span><span data-token-index=\"0\"> prio </span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">2</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> NZERO </span><span class=\"token operator\" data-token-index=\"0\">-</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">struct</span><span data-token-index=\"0\"> </span><span class=\"token class-name\" data-token-index=\"0\">tcb</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> selected_Tcb</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\tselected_Tcb </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> valid_Prio </span><span class=\"token operator\" data-token-index=\"0\">==</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">?</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">GetSelectedTcb</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">tid</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">:</span><span data-token-index=\"0\"> </span><span class=\"token constant\" data-token-index=\"0\">NULL</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\tselected_Tcb </span><span class=\"token operator\" data-token-index=\"0\">!=</span><span data-token-index=\"0\"> </span><span class=\"token constant\" data-token-index=\"0\">NULL</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">?</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">selected_Tcb</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">nice </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> prio </span><span class=\"token operator\" data-token-index=\"0\">-</span><span data-token-index=\"0\"> NZERO</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n\t\t\t\t\t\t </span><span class=\"token operator\" data-token-index=\"0\">:</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">op_Result </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">-</span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">return</span><span data-token-index=\"0\"> op_Result</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"e4534dcd-2ed1-42ac-b512-4f83bc63293e\" class=\"notion-selectable notion-sub_sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"e4534dcd-2ed1-42ac-b512-4f83bc63293e\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">tcb增加动态优先级属性</div></div></div><div data-block-id=\"0a4179f2-4e2f-4dc7-bc4b-896a08f9c195\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\"><span style=\"font-weight:600\" data-token-index=\"0\">待增加的变量说明</span></div></div></div></div><div data-block-id=\"0efdaaed-7680-41f6-b30b-1d880374e464\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">estcpu</span>-表示线程所用CPU时间，<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"2\">fixedpt</span>型，定时器中断会更新一次，并且每秒钟所有线程也会更新其<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"4\">estcpu</span></div></div></div></div></div><div data-block-id=\"160d5da4-c204-4400-bd3e-d1439cf2e124\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">priority</span>-表示线程的动态优先级，<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"2\">int</span>型，范围0-127</div></div></div></div></div><div data-block-id=\"c37c9c2b-58d9-4d6b-9b1a-65fe4f80bf14\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\"><span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"0\">g_load_avg</span>-表示系统的平均负荷，<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"2\">fixedpt</span>型，每秒更新</div></div></div></div></div><div data-block-id=\"e0605808-29c0-423f-b642-a7d76dcfddf0\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">更新规则：\n<span style=\"font-weight:600\" data-token-index=\"1\">estcpu</span>:</div></div></div></div><div data-block-id=\"6f3529c9-a2a7-4d22-82eb-cf2a18bb3e6a\" class=\"notion-selectable notion-equation-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex; position: relative;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; position: relative; width: 100%; border-radius: 3px;\"><div style=\"display: flex; padding: 4px 8px; width: 100%; flex-direction: column; overflow: auto; color: inherit; fill: inherit;\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi><mi>s</mi><mi>t</mi><mi>c</mi><mi>p</mi><mi>u</mi><mo>⇐</mo><mfrac><mrow><mn>2</mn><mo>×</mo><mi>g</mi><mi mathvariant=\"normal\">_</mi><mi>l</mi><mi>o</mi><mi>a</mi><mi>d</mi><mi mathvariant=\"normal\">_</mi><mi>a</mi><mi>v</mi><mi>g</mi></mrow><mrow><mn>2</mn><mo>×</mo><mi>g</mi><mi mathvariant=\"normal\">_</mi><mi>l</mi><mi>o</mi><mi>a</mi><mi>d</mi><mi mathvariant=\"normal\">_</mi><mi>a</mi><mi>v</mi><mi>g</mi><mo>+</mo><mn>1</mn></mrow></mfrac><mo>×</mo><mi>e</mi><mi>s</mi><mi>t</mi><mi>c</mi><mi>p</mi><mi>u</mi><mo>+</mo><mi>n</mi><mi>i</mi><mi>c</mi><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">estcpu \\Leftarrow \\frac{2\\times g\\_load\\_avg}{2\\times g\\_load\\_avg +1} \\times estcpu+nice</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.80952em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">u</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇐</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.39044em;vertical-align:-0.996em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.39444em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">d</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.6999999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">d</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.996em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.80952em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">u</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">e</span></span></span></span></span></div></div></div></div><div data-block-id=\"88df6db5-efdf-4fb2-8451-47e3cf3e3f4e\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">\n可化为\n\n</div></div></div></div><div data-block-id=\"db380ea4-3958-45ce-b54e-e5101150479c\" class=\"notion-selectable notion-equation-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex; position: relative;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; position: relative; width: 100%; border-radius: 3px;\"><div style=\"display: flex; padding: 4px 8px; width: 100%; flex-direction: column; overflow: auto; color: inherit; fill: inherit;\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi><mi>s</mi><mi>t</mi><mi>c</mi><mi>p</mi><mi>u</mi><mo>⇐</mo><mi>e</mi><mi>s</mi><mi>t</mi><mi>c</mi><mi>p</mi><mi>u</mi><mo>−</mo><mfrac><mrow><mi>e</mi><mi>s</mi><mi>t</mi><mi>c</mi><mi>p</mi><mi>u</mi></mrow><mrow><mn>2</mn><mo>×</mo><mi>g</mi><mi mathvariant=\"normal\">_</mi><mi>l</mi><mi>o</mi><mi>a</mi><mi>d</mi><mi mathvariant=\"normal\">_</mi><mi>a</mi><mi>v</mi><mi>g</mi><mo>+</mo><mn>1</mn></mrow></mfrac><mo>+</mo><mi>n</mi><mi>i</mi><mi>c</mi><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">estcpu \\Leftarrow estcpu-\\frac{estcpu}{2\\times g\\_load\\_avg +1}+nice</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.80952em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">u</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇐</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.80952em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">u</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.28808em;vertical-align:-0.996em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.29208em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">d</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">u</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.996em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">e</span></span></span></span></span></div></div></div></div><div data-block-id=\"8a479752-cb35-4595-9d35-8ef0f60dc48c\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">\n<span style=\"font-weight:600\" data-token-index=\"1\">prority</span>:\n\n</div></div></div></div><div data-block-id=\"92a2e184-66bb-48ba-b226-82dcec348d69\" class=\"notion-selectable notion-equation-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex; position: relative;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; position: relative; width: 100%; border-radius: 3px;\"><div style=\"display: flex; padding: 4px 8px; width: 100%; flex-direction: column; overflow: auto; color: inherit; fill: inherit;\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>y</mi><mo>⇐</mo><mi>P</mi><mi>R</mi><mi>I</mi><mi mathvariant=\"normal\">_</mi><mi>U</mi><mi>S</mi><mi>E</mi><mi>R</mi><mi mathvariant=\"normal\">_</mi><mi>M</mi><mi>A</mi><mi>X</mi><mo>−</mo><mfrac><mrow><mi>e</mi><mi>s</mi><mi>t</mi><mi>c</mi><mi>p</mi><mi>u</mi></mrow><mn>4</mn></mfrac><mo>−</mo><mn>2</mn><mo>×</mo><mi>n</mi><mi>i</mi><mi>c</mi><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">prority \\Leftarrow PRI\\_USER\\_MAX-\\frac{estcpu}{4}-2\\times nice</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇐</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.99333em;vertical-align:-0.31em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">A</span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.9780799999999998em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.29208em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">4</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">u</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">e</span></span></span></span></span></div></div></div></div><div data-block-id=\"f0a281b0-bf6e-40ba-b499-b47826995b2d\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">\n<span style=\"font-weight:600\" data-token-index=\"1\">g_load_avg</span>:\n\n</div></div></div></div><div data-block-id=\"9fd82c50-5e1d-4e77-b360-c4047ec932f9\" class=\"notion-selectable notion-equation-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex; position: relative;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; position: relative; width: 100%; border-radius: 3px;\"><div style=\"display: flex; padding: 4px 8px; width: 100%; flex-direction: column; overflow: auto; color: inherit; fill: inherit;\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi><mi mathvariant=\"normal\">_</mi><mi>l</mi><mi>o</mi><mi>a</mi><mi>d</mi><mi mathvariant=\"normal\">_</mi><mi>a</mi><mi>v</mi><mi>g</mi><mo>⇐</mo><mfrac><mn>59</mn><mn>60</mn></mfrac><mo>×</mo><mi>g</mi><mi mathvariant=\"normal\">_</mi><mi>l</mi><mi>o</mi><mi>a</mi><mi>d</mi><mi mathvariant=\"normal\">_</mi><mi>a</mi><mi>v</mi><mi>g</mi><mo>+</mo><mfrac><mn>1</mn><mn>60</mn></mfrac><mo>×</mo><mi>n</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">g\\_load\\_avg \\Leftarrow \\frac{59}{60}\\times g\\_load\\_avg+\\frac{1}{60}\\times nready</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.00444em;vertical-align:-0.31em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">d</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇐</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.00744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">6</span><span class=\"mord\">0</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span><span class=\"mord\">9</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.00444em;vertical-align:-0.31em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">d</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.00744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">6</span><span class=\"mord\">0</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span></div></div></div></div><div data-block-id=\"ffbe53e4-942b-4d74-adcb-0f7bb24d1ba7\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">\n可化为\n\n</div></div></div></div><div data-block-id=\"2fedafb6-faa7-437c-b104-e6d561c3b3b8\" class=\"notion-selectable notion-equation-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex; position: relative;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 20ms ease-in 0s; cursor: pointer; position: relative; width: 100%; border-radius: 3px;\"><div style=\"display: flex; padding: 4px 8px; width: 100%; flex-direction: column; overflow: auto; color: inherit; fill: inherit;\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi><mi mathvariant=\"normal\">_</mi><mi>l</mi><mi>o</mi><mi>a</mi><mi>d</mi><mi mathvariant=\"normal\">_</mi><mi>a</mi><mi>v</mi><mi>g</mi><mo>⇐</mo><mi>g</mi><mi mathvariant=\"normal\">_</mi><mi>l</mi><mi>o</mi><mi>a</mi><mi>d</mi><mi mathvariant=\"normal\">_</mi><mi>a</mi><mi>v</mi><mi>g</mi><mo>−</mo><mfrac><mrow><mi>g</mi><mi mathvariant=\"normal\">_</mi><mi>l</mi><mi>o</mi><mi>a</mi><mi>d</mi><mi mathvariant=\"normal\">_</mi><mi>a</mi><mi>v</mi><mi>g</mi></mrow><mn>60</mn></mfrac><mo>+</mo><mfrac><mrow><mi>n</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>y</mi></mrow><mn>60</mn></mfrac></mrow><annotation encoding=\"application/x-tex\">g\\_load\\_avg \\Leftarrow g\\_load\\_avg-\\frac{g\\_load\\_avg}{60}+\\frac{ nready}{60}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.00444em;vertical-align:-0.31em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">d</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇐</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.00444em;vertical-align:-0.31em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">d</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.08044em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.39444em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">6</span><span class=\"mord\">0</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.6999999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">d</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.0574399999999997em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714399999999998em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">6</span><span class=\"mord\">0</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></div></div></div></div><div data-block-id=\"5309e7af-598a-4ca4-ba13-5e75eb3c6f3d\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; min-height: 1em; color: rgb(55, 53, 47); -webkit-text-fill-color: rgba(55, 53, 47, 0.4);\"></div></div></div></div><div data-block-id=\"ed1a6d0b-7f22-41de-996c-33bd88977b60\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">①在<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">struct tcb</span>中，增加两个属性<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">estcpu</span>, <span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"5\">priority</span>，头部声明一个全局变量<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"7\">g_load_avg</span>\n\\kernel\\kernel.h中：\n在<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"9\">nice</span>属性后插入</div></div></div></div><div data-block-id=\"750020b2-e7d0-493d-bc3f-e82c606ed044\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> nice</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">   </span><span class=\"token comment\" data-token-index=\"0\">//static priority  </span><span data-token-index=\"0\">\nfixedpt estcpu</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span class=\"token comment\" data-token-index=\"0\">//record the time of using cpu  </span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> priority</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">   </span><span class=\"token comment\" data-token-index=\"0\">//the priority of thread  </span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"0a03dd8f-fe89-4dbf-9478-14181fb0bca4\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">头部需声明：</div></div></div></div><div data-block-id=\"5fca2ddc-8a37-45a6-80ee-cae140d4e242\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token string\" data-token-index=\"0\">\"fixedptc.h\"</span><span class=\"token macro property\" data-token-index=\"0\">      </span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">define</span><span class=\"token macro property\" data-token-index=\"0\"> NZERO 20    </span><span class=\"token comment\" data-token-index=\"0\">//The bound of static priority  </span><span data-token-index=\"0\">\nfixedpt g_load_avg</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span class=\"token comment\" data-token-index=\"0\">//System average load  </span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"c4fb2a87-77c9-4a2d-b56c-648fc110c7e6\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">在\\kernel\\task.c中：\n头部声明：</div></div></div></div><div data-block-id=\"348e9690-bb9f-4606-b375-6434b7cb8dd0\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">define</span><span class=\"token macro property\" data-token-index=\"0\"> PRI_USER_MIN 0  </span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">define</span><span class=\"token macro property\" data-token-index=\"0\"> PRI_USER_MAX 127  </span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"fcb2e90d-0eac-4d17-937a-8e809ca451cf\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">②在函数<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">sys_task_create</span>中<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">new-&gt;nice=0</span>后初始化<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"5\">estcpu=0</span></div></div></div></div><div data-block-id=\"6bb25ea3-0a09-4a90-9bd5-d8fb0ef65470\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span data-token-index=\"0\">new</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">nice </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">  </span><span class=\"token comment\" data-token-index=\"0\">// initialize the static priority  </span><span data-token-index=\"0\">\nnew</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">estcpu </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">fixedpt_fromint</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">  \nnew</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">priority </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\">  \n    PRI_USER_MAX</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">  </span><span class=\"token comment\" data-token-index=\"0\">// new-&gt;priority=PRI_USER_MAX-(estcpu/4)-(nice*2);  </span><span data-token-index=\"0\">\n                   </span><span class=\"token comment\" data-token-index=\"0\">// initial the dynamic priority </span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"f7ade838-fea3-4b3c-a460-d2882fd74127\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">③在<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">init_task()</span>中初始化<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">g_load_avg</span></div></div></div></div><div data-block-id=\"0da90479-c35f-463f-ab45-ef8b5f6cbf55\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">init_task</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">  \n        ……  \n    g_task_own_fpu </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token constant\" data-token-index=\"0\">NULL</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">  \n  \n    g_load_avg </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">fixedpt_fromint</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">  \n        ……  \n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">  </span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"f79c2373-ad0f-4d9f-835e-21e5b8b1758e\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">④每次定时器中断更新<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">estcpu</span>和<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">g_load_avg</span>：\n在\\kernel\\timer.c中<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"5\">isr_timer()</span>函数前添加<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"7\">UpdateEstcpu()</span>实现每秒为所有线程（运行、就绪和等待）更新<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"9\">estcpu</span>和<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"11\">g_load_avg</span>，<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"13\">isr_timer()</span>中每次定时器中断更新<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"15\">estcpu</span>，其中<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"17\">g_timer_ticks % HZ == 0</span>表示已过1秒，此时应调用<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"19\">UpdateEstcpu()</span></div></div></div></div><div data-block-id=\"430e0244-33e6-498d-8df2-1f7cd125adb1\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token comment\" data-token-index=\"0\">/**Update estcpu*/</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">UpdateEstcpu</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n    </span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> nready </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n    </span><span class=\"token keyword\" data-token-index=\"0\">struct</span><span data-token-index=\"0\"> </span><span class=\"token class-name\" data-token-index=\"0\">tcb</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> p_Tcb </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> g_task_head</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span class=\"token comment\" data-token-index=\"0\">//point to some tcb in the linked list</span><span data-token-index=\"0\">\n\n    fixedpt deno </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> g_load_avg </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> g_load_avg </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> FIXEDPT_ONE</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span class=\"token comment\" data-token-index=\"0\">//the denominator of ratio as estcpu updating</span><span data-token-index=\"0\">\n\n    </span><span class=\"token keyword\" data-token-index=\"0\">while</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">p_Tcb </span><span class=\"token operator\" data-token-index=\"0\">!=</span><span data-token-index=\"0\"> </span><span class=\"token constant\" data-token-index=\"0\">NULL</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n        </span><span class=\"token comment\" data-token-index=\"0\">//count the num of thread in ready queue</span><span data-token-index=\"0\">\n        </span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">p_Tcb </span><span class=\"token operator\" data-token-index=\"0\">!=</span><span data-token-index=\"0\"> task0 </span><span class=\"token operator\" data-token-index=\"0\">&amp;&amp;</span><span data-token-index=\"0\"> p_Tcb</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">state </span><span class=\"token operator\" data-token-index=\"0\">==</span><span data-token-index=\"0\"> TASK_STATE_READY</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n            nready</span><span class=\"token operator\" data-token-index=\"0\">++</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n        </span><span class=\"token comment\" data-token-index=\"0\">//update estcpu</span><span data-token-index=\"0\">\n        p_Tcb</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">estcpu </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> p_Tcb</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">estcpu\n            </span><span class=\"token operator\" data-token-index=\"0\">-</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">fixedpt_div</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">p_Tcb</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">estcpu</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> deno</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n            </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">fixedpt_fromint</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">p_Tcb</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">nice</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n        p_Tcb </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> p_Tcb</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">next</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n    </span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n    </span><span class=\"token comment\" data-token-index=\"0\">//update the average load</span><span data-token-index=\"0\">\n    g_load_avg </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> g_load_avg\n        </span><span class=\"token operator\" data-token-index=\"0\">-</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">fixedpt_div</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">g_load_avg</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">fixedpt_fromint</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">60</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n        </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">fixedpt_div</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token function\" data-token-index=\"0\">fixedpt_fromint</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">nready</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">fixedpt_fromint</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">60</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\n</span><span class=\"token comment\" data-token-index=\"0\">/**\n * 定时器的中断处理程序\n */</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">isr_timer</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">uint32_t irq</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">struct</span><span data-token-index=\"0\"> </span><span class=\"token class-name\" data-token-index=\"0\">context</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> ctx</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n    g_timer_ticks</span><span class=\"token operator\" data-token-index=\"0\">++</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n    </span><span class=\"token comment\" data-token-index=\"0\">//sys_putchar('.');</span><span data-token-index=\"0\">\n\n    </span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">g_task_running </span><span class=\"token operator\" data-token-index=\"0\">!=</span><span data-token-index=\"0\"> </span><span class=\"token constant\" data-token-index=\"0\">NULL</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n        </span><span class=\"token comment\" data-token-index=\"0\">//如果是task0在运行，则强制调度</span><span data-token-index=\"0\">\n        </span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">g_task_running</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">tid </span><span class=\"token operator\" data-token-index=\"0\">==</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n            g_resched </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n        </span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">else</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n            </span><span class=\"token comment\" data-token-index=\"0\">//否则，把当前线程的时间片减一</span><span data-token-index=\"0\">\n            </span><span class=\"token operator\" data-token-index=\"0\">--</span><span data-token-index=\"0\">g_task_running</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">timeslice</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\n            </span><span class=\"token comment\" data-token-index=\"0\">//update estcpu for every timer tick</span><span data-token-index=\"0\">\n            </span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">g_task_running </span><span class=\"token operator\" data-token-index=\"0\">!=</span><span data-token-index=\"0\"> task0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n                g_task_running</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">estcpu </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> g_task_running</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">estcpu </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> FIXEDPT_ONE</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\n            </span><span class=\"token comment\" data-token-index=\"0\">//如果当前线程用完了时间片，也要强制调度</span><span data-token-index=\"0\">\n            </span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">g_task_running</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">timeslice </span><span class=\"token operator\" data-token-index=\"0\">&lt;=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n                g_resched </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n                g_task_running</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">timeslice </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> TASK_TIMESLICE_DEFAULT</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n            </span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n        </span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n    </span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n    </span><span class=\"token comment\" data-token-index=\"0\">//one second has gone</span><span data-token-index=\"0\">\n    </span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">g_timer_ticks </span><span class=\"token operator\" data-token-index=\"0\">%</span><span data-token-index=\"0\"> HZ </span><span class=\"token operator\" data-token-index=\"0\">==</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n        </span><span class=\"token function\" data-token-index=\"0\">UpdateEstcpu</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"9a9d4be9-c306-44c2-a3b5-535407d12693\" class=\"notion-selectable notion-sub_sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"9a9d4be9-c306-44c2-a3b5-535407d12693\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">优先级调度算法</div></div></div><div data-block-id=\"453272d2-0722-4aab-83ab-e428fd91fcb4\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\"><span style=\"font-weight:600\" data-token-index=\"0\">调度算法：</span>\n①线程链表中仅有task0 ? (切换到task0，重新调度) : ②\n②队首为task0 ? (从g_task_head-&gt;next开始遍历，然后③) : (从g_task_head开始遍历，然后③)\n③从遍历列表中找出最大优先级的tcb，同时更新priority（除task0）\n④切换到选中的tcb，重新调度</div></div></div></div><div data-block-id=\"f883df08-990c-422f-ba4d-82a98b14425f\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\"><span style=\"font-weight:600\" data-token-index=\"0\">算法实现：</span>\n修改\\kernel\\task.c中的函数<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"2\">schedule()</span>，实现优先级调度算法。\n附上修改后的代码，说明见注释：</div></div></div></div><div data-block-id=\"25469472-e04c-4a3d-882f-45867025c223\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token comment\" data-token-index=\"0\">/**\n *  Calculate the priority,\n *  Find the highest-priority thread, return it\n *  Maybe there's only task0, return it\n */</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">struct</span><span data-token-index=\"0\"> </span><span class=\"token class-name\" data-token-index=\"0\">tcb</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">SelectedTcb</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">struct</span><span data-token-index=\"0\"> </span><span class=\"token class-name\" data-token-index=\"0\">tcb</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> p_Tcb</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">struct</span><span data-token-index=\"0\"> </span><span class=\"token class-name\" data-token-index=\"0\">tcb</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> maxprio_Tcb</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\tmaxprio_Tcb </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> p_Tcb </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> g_task_head</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">while</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">p_Tcb </span><span class=\"token operator\" data-token-index=\"0\">!=</span><span data-token-index=\"0\"> </span><span class=\"token constant\" data-token-index=\"0\">NULL</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token comment\" data-token-index=\"0\">// update the priority</span><span data-token-index=\"0\">\n\t\tp_Tcb</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">priority </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\">\n\t\t\tPRI_USER_MAX </span><span class=\"token operator\" data-token-index=\"0\">-</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token function\" data-token-index=\"0\">fixedpt_toint</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token function\" data-token-index=\"0\">fixedpt_div</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">p_Tcb</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">estcpu</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">fixedpt_fromint</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">4</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">-</span><span data-token-index=\"0\">\n\t\t\tp_Tcb</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">nice </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">2</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">p_Tcb</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">priority </span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span data-token-index=\"0\"> PRI_USER_MIN</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> p_Tcb</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">priority </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> PRI_USER_MIN</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">p_Tcb</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">priority </span><span class=\"token operator\" data-token-index=\"0\">&gt;</span><span data-token-index=\"0\"> PRI_USER_MAX</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> p_Tcb</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">priority </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> PRI_USER_MAX</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">p_Tcb </span><span class=\"token operator\" data-token-index=\"0\">!=</span><span data-token-index=\"0\"> task0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">p_Tcb</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">priority </span><span class=\"token operator\" data-token-index=\"0\">&gt;=</span><span data-token-index=\"0\">\n\t\t\t\t\tmaxprio_Tcb\n\t\t\t\t\t\t</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">priority </span><span class=\"token operator\" data-token-index=\"0\">&amp;&amp;</span><span data-token-index=\"0\">  </span><span class=\"token comment\" data-token-index=\"0\">// search the highest-priority thread</span><span data-token-index=\"0\">\n\t\t\t\tp_Tcb</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">state </span><span class=\"token operator\" data-token-index=\"0\">==</span><span data-token-index=\"0\"> TASK_STATE_READY</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n\t\t\t\tmaxprio_Tcb </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> p_Tcb</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\tp_Tcb </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> p_Tcb</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">next</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">return</span><span data-token-index=\"0\"> maxprio_Tcb</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">  </span><span class=\"token comment\" data-token-index=\"0\">// return the max prio one, maybe task0</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n</span><span class=\"token comment\" data-token-index=\"0\">/**\n * CPU调度器函数\n *\n * 注意：该函数的执行不能被中断\n */</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">schedule</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">struct</span><span data-token-index=\"0\"> </span><span class=\"token class-name\" data-token-index=\"0\">tcb</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> select </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">SelectedTcb</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">select </span><span class=\"token operator\" data-token-index=\"0\">==</span><span data-token-index=\"0\"> g_task_running</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">select</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">state </span><span class=\"token operator\" data-token-index=\"0\">==</span><span data-token-index=\"0\"> TASK_STATE_READY</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token keyword\" data-token-index=\"0\">return</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t\tselect </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> task0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">// printk(\"0x%d -&gt; 0x%d\\\\r\\\\n\", (g_task_running == NULL) ? -1 :</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">// g_task_running-&gt;tid, select-&gt;tid);</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">select</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">signature </span><span class=\"token operator\" data-token-index=\"0\">!=</span><span data-token-index=\"0\"> TASK_SIGNATURE</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token function\" data-token-index=\"0\">printk</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"warning: kernel stack of task #%d overflow!!!\"</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> select</span><span class=\"token operator\" data-token-index=\"0\">-&gt;</span><span data-token-index=\"0\">tid</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\tg_resched </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">switch_to</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">select</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"0ae670c0-d625-4ab8-8c60-4d18758a6fd8\" class=\"notion-selectable notion-sub_sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"0ae670c0-d625-4ab8-8c60-4d18758a6fd8\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.25em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 3\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">测试调度器</div></div></div><div data-block-id=\"9e5ee1b0-dd54-44a9-8685-ff24c9222f32\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">后面的工作就是创建线程、定义线程函数、折腾画图函数等操作，不做介绍，直接贴代码。\nmain.c函数中：</div></div></div></div><div data-block-id=\"8da5feef-398a-4f12-8237-087614e9aea7\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span data-token-index=\"0\">……\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"graphics.h\"</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">include</span><span class=\"token macro property\" data-token-index=\"0\"> </span><span class=\"token string\" data-token-index=\"0\">\"lab3.h\"</span><span data-token-index=\"0\">\n……\n</span><span class=\"token comment\" data-token-index=\"0\">/**\n * 第一个运行在用户模式的线程所执行的函数\n */</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">main</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> pv</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"task #%d: I'm the first user task(pv=0x%08x)!\\\\r\\\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">task_getid</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t   pv</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\n\t</span><span class=\"token comment\" data-token-index=\"0\">// TODO: Your code goes here</span><span data-token-index=\"0\">\n    </span><span class=\"token function\" data-token-index=\"0\">test_lab3</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\n\t</span><span class=\"token keyword\" data-token-index=\"0\">while</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">task_exit</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"54b122c2-6487-4983-9510-07d6b446c8a0\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">lab3.h</div></div></div></div><div data-block-id=\"0e4025f4-0d34-40cc-ad26-a24f460183b3\" class=\"notion-selectable notion-code-block\" style=\"width: 100%; max-width: 608px; margin-top: 4px; margin-bottom: 4px;\"><div style=\"display: flex;\"><div style=\"flex-grow: 1; border-radius: 3px; text-align: left; position: relative; background: rgb(247, 246, 243); min-width: 0px; width: 100%;\"><div class=\"line-numbers notion-code-block\" style=\"display: flex; overflow-x: auto;\"><div contenteditable=\"false\" spellcheck=\"false\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"flex-grow: 1; flex-shrink: 1; text-align: left; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 85%; tab-size: 2; padding: 30px 16px 30px 20px; min-height: 1em; color: rgb(55, 53, 47); white-space: pre;\"><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">ifndef</span><span class=\"token macro property\" data-token-index=\"0\"> _LAB3_</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">define</span><span class=\"token macro property\" data-token-index=\"0\"> _LAB3_</span><span data-token-index=\"0\">\n</span><span class=\"token comment\" data-token-index=\"0\">/*\n#include &lt;inttypes.h&gt;\n#include &lt;math.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;stddef.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;syscall.h&gt;\n#include \"graphics.h\"\n*/</span><span data-token-index=\"0\">\n\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">define</span><span class=\"token macro property\" data-token-index=\"0\"> ar_Size 100</span><span data-token-index=\"0\">\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">define</span><span class=\"token macro property\" data-token-index=\"0\"> max_Elem 300</span><span data-token-index=\"0\">\nuint16_t w_Line</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\nuint16_t l_Ratio</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">struct</span><span data-token-index=\"0\"> </span><span class=\"token class-name\" data-token-index=\"0\">Thr</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> tid</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> prio</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">DrawPrioBar</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> length</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> LorR</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\tuint16_t x </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> g_graphic_dev</span><span class=\"token punctuation\" data-token-index=\"0\">.</span><span data-token-index=\"0\">XResolution </span><span class=\"token operator\" data-token-index=\"0\">/</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">2</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> sign </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> LorR</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\tCOLORREF cr</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">sign </span><span class=\"token operator\" data-token-index=\"0\">==</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">-</span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n\t\tcr </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">RGB</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">255</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">else</span><span data-token-index=\"0\">\n\t\tcr </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">RGB</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">255</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> i</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> j</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">i </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> i </span><span class=\"token operator\" data-token-index=\"0\">&lt;=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">20</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">++</span><span data-token-index=\"0\">i</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">j </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> j </span><span class=\"token operator\" data-token-index=\"0\">&lt;=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">78</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">++</span><span data-token-index=\"0\">j</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">setPixel</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">x </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> sign </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> i</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> j</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">RGB</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">119</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">136</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">153</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">i </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> i </span><span class=\"token operator\" data-token-index=\"0\">&lt;=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">20</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">++</span><span data-token-index=\"0\">i</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">j </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> j </span><span class=\"token operator\" data-token-index=\"0\">&lt;=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">78</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">-</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">2</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> length</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">++</span><span data-token-index=\"0\">j</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token function\" data-token-index=\"0\">setPixel</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">x </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> sign </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> i</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">78</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">-</span><span data-token-index=\"0\"> j</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> cr</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">j </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> j </span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">78</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">++</span><span data-token-index=\"0\">j</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">setPixel</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">x</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> j</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">RGB</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">255</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">255</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">255</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">tsk_foo_control</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> pv</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> key</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">struct</span><span data-token-index=\"0\"> </span><span class=\"token class-name\" data-token-index=\"0\">Thr</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> th </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">struct</span><span data-token-index=\"0\"> </span><span class=\"token class-name\" data-token-index=\"0\">Thr</span><span class=\"token operator\" data-token-index=\"0\">*</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">pv</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> tid_A </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> th</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span class=\"token punctuation\" data-token-index=\"0\">.</span><span data-token-index=\"0\">tid</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> prio_A </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> th</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span class=\"token punctuation\" data-token-index=\"0\">.</span><span data-token-index=\"0\">prio</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> tid_B </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> th</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span class=\"token punctuation\" data-token-index=\"0\">.</span><span data-token-index=\"0\">tid</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> prio_B </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> th</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span class=\"token punctuation\" data-token-index=\"0\">.</span><span data-token-index=\"0\">prio</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\n\t</span><span class=\"token keyword\" data-token-index=\"0\">while</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\tkey </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">getchar</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">switch</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">key</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token keyword\" data-token-index=\"0\">case</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0x4800</span><span class=\"token operator\" data-token-index=\"0\">:</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">  </span><span class=\"token comment\" data-token-index=\"0\">// UP</span><span data-token-index=\"0\">\n\t\t\t\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">prio_A </span><span class=\"token operator\" data-token-index=\"0\">&gt;=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">&amp;&amp;</span><span data-token-index=\"0\"> prio_A </span><span class=\"token operator\" data-token-index=\"0\">&lt;=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">40</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t\t\t\t</span><span class=\"token function\" data-token-index=\"0\">setpriority</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">tid_A</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">--</span><span data-token-index=\"0\">prio_A</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t\t\t</span><span class=\"token function\" data-token-index=\"0\">DrawPrioBar</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token function\" data-token-index=\"0\">getpriority</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">tid_A</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">-</span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">break</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token keyword\" data-token-index=\"0\">case</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0x5000</span><span class=\"token operator\" data-token-index=\"0\">:</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">  </span><span class=\"token comment\" data-token-index=\"0\">// DOWN</span><span data-token-index=\"0\">\n\t\t\t\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">prio_A </span><span class=\"token operator\" data-token-index=\"0\">&gt;=</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">-</span><span class=\"token number\" data-token-index=\"0\">1</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">&amp;&amp;</span><span data-token-index=\"0\"> prio_A </span><span class=\"token operator\" data-token-index=\"0\">&lt;=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">38</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t\t\t\t</span><span class=\"token function\" data-token-index=\"0\">setpriority</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">tid_A</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">++</span><span data-token-index=\"0\">prio_A</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t\t\t</span><span class=\"token function\" data-token-index=\"0\">DrawPrioBar</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token function\" data-token-index=\"0\">getpriority</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">tid_A</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">-</span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">break</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token keyword\" data-token-index=\"0\">case</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0x4d00</span><span class=\"token operator\" data-token-index=\"0\">:</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">  </span><span class=\"token comment\" data-token-index=\"0\">// RIGHT</span><span data-token-index=\"0\">\n\t\t\t\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">prio_B</span><span class=\"token operator\" data-token-index=\"0\">&gt;=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">&amp;&amp;</span><span data-token-index=\"0\"> prio_B </span><span class=\"token operator\" data-token-index=\"0\">&lt;=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">40</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t\t\t\t</span><span class=\"token function\" data-token-index=\"0\">setpriority</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">tid_B</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">--</span><span data-token-index=\"0\">prio_B</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t\t\t</span><span class=\"token function\" data-token-index=\"0\">DrawPrioBar</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token function\" data-token-index=\"0\">getpriority</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">tid_B</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">break</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token keyword\" data-token-index=\"0\">case</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0x4b00</span><span class=\"token operator\" data-token-index=\"0\">:</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">  </span><span class=\"token comment\" data-token-index=\"0\">// LEFT</span><span data-token-index=\"0\">\n\t\t\t\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">prio_B </span><span class=\"token operator\" data-token-index=\"0\">&gt;=</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">-</span><span class=\"token number\" data-token-index=\"0\">1</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">&amp;&amp;</span><span data-token-index=\"0\"> prio_B </span><span class=\"token operator\" data-token-index=\"0\">&lt;=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">38</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t\t\t\t</span><span class=\"token function\" data-token-index=\"0\">setpriority</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">tid_B</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">++</span><span data-token-index=\"0\">prio_B</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t\t\t</span><span class=\"token function\" data-token-index=\"0\">DrawPrioBar</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token function\" data-token-index=\"0\">getpriority</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">tid_B</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">break</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token keyword\" data-token-index=\"0\">default</span><span class=\"token operator\" data-token-index=\"0\">:</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">task_exit</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\n</span><span class=\"token comment\" data-token-index=\"0\">//  create 2 arrays</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">Generate2arrays</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> ar_1</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">int</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> ar_2</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">srand</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token function\" data-token-index=\"0\">time</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token constant\" data-token-index=\"0\">NULL</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> i</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> j</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">float</span><span data-token-index=\"0\"> x_Begin </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> g_graphic_dev</span><span class=\"token punctuation\" data-token-index=\"0\">.</span><span data-token-index=\"0\">XResolution </span><span class=\"token operator\" data-token-index=\"0\">/</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">2</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">i </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> i </span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span data-token-index=\"0\"> ar_Size</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> i</span><span class=\"token operator\" data-token-index=\"0\">++</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t\tar_1</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span data-token-index=\"0\">i</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> ar_2</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span data-token-index=\"0\">i</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">rand</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">%</span><span data-token-index=\"0\"> max_Elem</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token comment\" data-token-index=\"0\">// draw lines</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token function\" data-token-index=\"0\">line</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> i </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> w_Line</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> ar_1</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span data-token-index=\"0\">i</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> l_Ratio</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> i </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> w_Line</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">RGB</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">255</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token function\" data-token-index=\"0\">line</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">x_Begin </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">28</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> i </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> w_Line</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> x_Begin </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">28</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> ar_1</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span data-token-index=\"0\">i</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> l_Ratio</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t\t i </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> w_Line</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">RGB</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">255</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">i </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">-</span><span class=\"token number\" data-token-index=\"0\">20</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> i </span><span class=\"token operator\" data-token-index=\"0\">&lt;=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">20</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">++</span><span data-token-index=\"0\">i</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">j </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> j </span><span class=\"token operator\" data-token-index=\"0\">&lt;=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">78</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">++</span><span data-token-index=\"0\">j</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">setPixel</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">x_Begin </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> i</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> j</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">RGB</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">119</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">136</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">153</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">j </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> j </span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span data-token-index=\"0\"> g_graphic_dev</span><span class=\"token punctuation\" data-token-index=\"0\">.</span><span data-token-index=\"0\">YResolution</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">++</span><span data-token-index=\"0\">j</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token function\" data-token-index=\"0\">setPixel</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">x_Begin</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> j</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">RGB</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">255</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">255</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">255</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\n</span><span class=\"token comment\" data-token-index=\"0\">// set time delay for thread action</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">DrawDelay</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">long</span><span data-token-index=\"0\"> lMs</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">long</span><span data-token-index=\"0\"> lRemainingMilliSecond </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">lMs</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">%</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1000</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">long</span><span data-token-index=\"0\"> lNanoSecond </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> lRemainingMilliSecond </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1000000</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">struct</span><span data-token-index=\"0\"> </span><span class=\"token class-name\" data-token-index=\"0\">timespec</span><span data-token-index=\"0\"> ts_sleep</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> ts_remaining</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\tts_sleep</span><span class=\"token punctuation\" data-token-index=\"0\">.</span><span data-token-index=\"0\">tv_sec </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">lMs</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">/</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1000</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\tts_sleep</span><span class=\"token punctuation\" data-token-index=\"0\">.</span><span data-token-index=\"0\">tv_nsec </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> lNanoSecond</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">nanosleep</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">ts_sleep</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">&amp;</span><span data-token-index=\"0\">ts_remaining</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\n</span><span class=\"token comment\" data-token-index=\"0\">// swap two elements and draw the lines</span><span data-token-index=\"0\">\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">SwapLine</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> array</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> area_Num</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> a_lineNum</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> b_lineNum</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t\t  COLORREF cr</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> l_fixed </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">28</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> area_Num</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> r_fixed </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">28</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">area_Num </span><span class=\"token operator\" data-token-index=\"0\">-</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\tuint16_t x_Begin </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> area_Num </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> g_graphic_dev</span><span class=\"token punctuation\" data-token-index=\"0\">.</span><span data-token-index=\"0\">XResolution </span><span class=\"token operator\" data-token-index=\"0\">/</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">2</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> l_fixed</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">line</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">x_Begin</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> a_lineNum </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> w_Line</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t x_Begin </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> array</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span data-token-index=\"0\">a_lineNum</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> l_Ratio </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> r_fixed</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> a_lineNum </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> w_Line</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t </span><span class=\"token function\" data-token-index=\"0\">RGB</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">line</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">x_Begin</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> a_lineNum </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> w_Line</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t x_Begin </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> array</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span data-token-index=\"0\">b_lineNum</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> l_Ratio </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> r_fixed</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> a_lineNum </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> w_Line</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t cr</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">line</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">x_Begin</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> b_lineNum </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> w_Line</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t x_Begin </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> array</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span data-token-index=\"0\">b_lineNum</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> l_Ratio </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> r_fixed</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> b_lineNum </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> w_Line</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t </span><span class=\"token function\" data-token-index=\"0\">RGB</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">line</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">x_Begin</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> b_lineNum </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> w_Line</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t x_Begin </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> array</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span data-token-index=\"0\">a_lineNum</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> l_Ratio </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> r_fixed</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> b_lineNum </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> w_Line</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\">\n\t\t cr</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> tmp </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> array</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span data-token-index=\"0\">a_lineNum</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\tarray</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span data-token-index=\"0\">a_lineNum</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> array</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span data-token-index=\"0\">b_lineNum</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\tarray</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span data-token-index=\"0\">b_lineNum</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> tmp</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">DrawDelay</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">55</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">tsk_foo_BubbleSort_1</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> pv</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> i</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> j</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> array </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span class=\"token operator\" data-token-index=\"0\">*</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">pv</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">i </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> i </span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span data-token-index=\"0\"> ar_Size</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> i</span><span class=\"token operator\" data-token-index=\"0\">++</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">j </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> ar_Size </span><span class=\"token operator\" data-token-index=\"0\">-</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> j </span><span class=\"token operator\" data-token-index=\"0\">&gt;</span><span data-token-index=\"0\"> i</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> j</span><span class=\"token operator\" data-token-index=\"0\">--</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">array</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span data-token-index=\"0\">j</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span data-token-index=\"0\"> array</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span data-token-index=\"0\">j </span><span class=\"token operator\" data-token-index=\"0\">-</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n\t\t\t\t</span><span class=\"token function\" data-token-index=\"0\">SwapLine</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">array</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> j</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> j </span><span class=\"token operator\" data-token-index=\"0\">-</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">RGB</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">255</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">task_exit</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">tsk_foo_BubbleSort_2</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> pv</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> i</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> j</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> array </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span class=\"token operator\" data-token-index=\"0\">*</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">pv</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">i </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> i </span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span data-token-index=\"0\"> ar_Size</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> i</span><span class=\"token operator\" data-token-index=\"0\">++</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token keyword\" data-token-index=\"0\">for</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">j </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> ar_Size </span><span class=\"token operator\" data-token-index=\"0\">-</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> j </span><span class=\"token operator\" data-token-index=\"0\">&gt;</span><span data-token-index=\"0\"> i</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\"> j</span><span class=\"token operator\" data-token-index=\"0\">--</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n\t\t\t</span><span class=\"token keyword\" data-token-index=\"0\">if</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">array</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span data-token-index=\"0\">j</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">&lt;</span><span data-token-index=\"0\"> array</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span data-token-index=\"0\">j </span><span class=\"token operator\" data-token-index=\"0\">-</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">\n\t\t\t\t</span><span class=\"token function\" data-token-index=\"0\">SwapLine</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">array</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> j</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> j </span><span class=\"token operator\" data-token-index=\"0\">-</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">RGB</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">255</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">task_exit</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token number\" data-token-index=\"0\">0</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\n</span><span class=\"token keyword\" data-token-index=\"0\">void</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">test_lab3</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">// declare 2 arrays</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> arr1</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span data-token-index=\"0\">ar_Size</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> arr2</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span data-token-index=\"0\">ar_Size</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\n\t</span><span class=\"token comment\" data-token-index=\"0\">// enter the gui</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> graphMode </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">0x143</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">init_graphic</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">graphMode</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\n\t</span><span class=\"token comment\" data-token-index=\"0\">// calculate the ratio(maybe there's no need to do these)</span><span data-token-index=\"0\">\n\tl_Ratio </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> g_graphic_dev</span><span class=\"token punctuation\" data-token-index=\"0\">.</span><span data-token-index=\"0\">XResolution </span><span class=\"token operator\" data-token-index=\"0\">/</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">2.0</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">/</span><span data-token-index=\"0\"> max_Elem</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\tw_Line </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> g_graphic_dev</span><span class=\"token punctuation\" data-token-index=\"0\">.</span><span data-token-index=\"0\">YResolution </span><span class=\"token operator\" data-token-index=\"0\">/</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">float</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span data-token-index=\"0\">ar_Size</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">// generate 2 arrays and draw!</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">Generate2arrays</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">arr1</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> arr2</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\n\t</span><span class=\"token comment\" data-token-index=\"0\">// alloc stack size</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">unsigned</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> st_Size </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1024</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1024</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">// create 2 sort threads</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">unsigned</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">char</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> stack_Sort1 </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">unsigned</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">char</span><span class=\"token operator\" data-token-index=\"0\">*</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token function\" data-token-index=\"0\">malloc</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">st_Size</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> tid_Sort1 </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token function\" data-token-index=\"0\">task_create</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">stack_Sort1 </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> st_Size</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> tsk_foo_BubbleSort_1</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> arr1</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">unsigned</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">char</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> stack_Sort2 </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">unsigned</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">char</span><span class=\"token operator\" data-token-index=\"0\">*</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token function\" data-token-index=\"0\">malloc</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">st_Size</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> tid_Sort2 </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\">\n\t\t</span><span class=\"token function\" data-token-index=\"0\">task_create</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">stack_Sort2 </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> st_Size</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> tsk_foo_BubbleSort_2</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> arr2</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">// initial the priorities</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">setpriority</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">tid_Sort1</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">10</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">setpriority</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">tid_Sort2</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">10</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">DrawPrioBar</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token function\" data-token-index=\"0\">getpriority</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">tid_Sort1</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">-</span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">DrawPrioBar</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token function\" data-token-index=\"0\">getpriority</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">tid_Sort2</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token comment\" data-token-index=\"0\">// create the control thread</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">struct</span><span data-token-index=\"0\"> </span><span class=\"token class-name\" data-token-index=\"0\">Thr</span><span data-token-index=\"0\"> th</span><span class=\"token punctuation\" data-token-index=\"0\">[</span><span class=\"token number\" data-token-index=\"0\">2</span><span class=\"token punctuation\" data-token-index=\"0\">]</span><span data-token-index=\"0\"> </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">tid_Sort1</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">10</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">{</span><span data-token-index=\"0\">tid_Sort2</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">10</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">unsigned</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">char</span><span class=\"token operator\" data-token-index=\"0\">*</span><span data-token-index=\"0\"> stack_Ctr </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token keyword\" data-token-index=\"0\">unsigned</span><span data-token-index=\"0\"> </span><span class=\"token keyword\" data-token-index=\"0\">char</span><span class=\"token operator\" data-token-index=\"0\">*</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token function\" data-token-index=\"0\">malloc</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">st_Size</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token keyword\" data-token-index=\"0\">int</span><span data-token-index=\"0\"> tid_Ctr </span><span class=\"token operator\" data-token-index=\"0\">=</span><span data-token-index=\"0\"> </span><span class=\"token function\" data-token-index=\"0\">task_create</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">stack_Ctr </span><span class=\"token operator\" data-token-index=\"0\">+</span><span data-token-index=\"0\"> st_Size</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> tsk_foo_control</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> th</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">setpriority</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">tid_Ctr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token number\" data-token-index=\"0\">1</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">  </span><span class=\"token comment\" data-token-index=\"0\">// nice = -19</span><span data-token-index=\"0\">\n\n\t</span><span class=\"token function\" data-token-index=\"0\">task_wait</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">tid_Sort1</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token constant\" data-token-index=\"0\">NULL</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">task_wait</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">tid_Sort2</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token constant\" data-token-index=\"0\">NULL</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">task_wait</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">tid_Ctr</span><span class=\"token punctuation\" data-token-index=\"0\">,</span><span data-token-index=\"0\"> </span><span class=\"token constant\" data-token-index=\"0\">NULL</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">free</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">stack_Sort1</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">free</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">stack_Sort2</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">free</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span data-token-index=\"0\">stack_Ctr</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n\t</span><span class=\"token function\" data-token-index=\"0\">printf</span><span class=\"token punctuation\" data-token-index=\"0\">(</span><span class=\"token string\" data-token-index=\"0\">\"Mession Success, Well Done!\\n\"</span><span class=\"token punctuation\" data-token-index=\"0\">)</span><span class=\"token punctuation\" data-token-index=\"0\">;</span><span data-token-index=\"0\">\n</span><span class=\"token punctuation\" data-token-index=\"0\">}</span><span data-token-index=\"0\">\n\n</span><span class=\"token macro property\" data-token-index=\"0\">#</span><span class=\"token directive keyword\" data-token-index=\"0\">endif</span><span class=\"token macro property\" data-token-index=\"0\">  </span><span class=\"token comment\" data-token-index=\"0\">//_LAB3_</span><span>\n</span></div></div><div style=\"position: absolute; top: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"></div><div style=\"position: absolute; bottom: 0px; right: 0px; color: rgba(55, 53, 47, 0.6); display: flex; align-items: center; justify-content: flex-end; height: 30px;\"><div role=\"button\" aria-disabled=\"true\" tabindex=\"-1\" style=\"user-select: none; transition: background 20ms ease-in 0s; display: inline-flex; align-items: center; white-space: nowrap; height: 20px; border-radius: 3px; font-size: 12px; line-height: 1.2; padding-left: 5px; padding-right: 5px; color: rgba(55, 53, 47, 0.6); margin-right: 5px;\">C<svg viewBox=\"0 0 30 30\" class=\"chevronDown\" style=\"width: 10px; height: 100%; display: block; fill: rgba(55, 53, 47, 0.3); flex-shrink: 0; backface-visibility: hidden; margin-left: 4px;\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg></div></div></div></div></div><div data-block-id=\"7cd43b82-2a76-4115-86cc-1451fdf3817f\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; min-height: 1em; color: rgb(55, 53, 47); -webkit-text-fill-color: rgba(55, 53, 47, 0.4);\"></div></div></div></div><div data-block-id=\"14e97d76-9f8b-42fa-b889-87734b72d230\" class=\"notion-selectable notion-sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1.4em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"14e97d76-9f8b-42fa-b889-87734b72d230\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.5em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 2\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">实验结果</div></div></div><div data-block-id=\"3ff7cc07-bb53-43ad-ab86-bd1f2c6feffa\" class=\"notion-selectable notion-image-block\" style=\"width: 100%; max-width: 800px; align-self: center; margin-top: 0.5em; margin-bottom: 0.5em;\"><div><div style=\"display: flex;\"><div class=\"notion-cursor-default\" style=\"position: relative; overflow: hidden; flex-grow: 1;\"><div style=\"position: relative;\"><div style=\"width: 100%; height: 100%;\"><img src=\"https://img.woyun.ink/article/2019/4/14/test.gif\" style=\"display: block; object-fit: cover; border-radius: 1px; width: 100%; pointer-events: auto;\"></div></div></div></div></div></div><div data-block-id=\"2566c064-bf64-47d5-900b-1bfd3084a385\" class=\"notion-selectable notion-sub_header-block\" style=\"width: 100%; max-width: 608px; margin-top: 1.4em; margin-bottom: 1px; color: rgb(55, 53, 47);\" id=\"2566c064-bf64-47d5-900b-1bfd3084a385\"><div style=\"display: flex; width: 100%; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-weight: 600; font-size: 1.5em; line-height: 1.3; color: inherit; fill: inherit;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"Heading 2\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">总结</div></div></div><div data-block-id=\"c47259a5-459b-47b1-b4f6-e5fab7efd1de\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">编程时对性能更加注重</div></div></div></div></div><div data-block-id=\"6958ca05-5395-4eb9-bbbf-0fd030a2554f\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">对线程的调度有初步认识</div></div></div></div></div><div data-block-id=\"b3f7738f-1fad-4344-9270-8070c9feaf56\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">温故了C，感觉自己的C越来越垃圾</div></div></div></div></div><div data-block-id=\"b9ec3c13-0cb3-4bd7-99e4-24f1e05e0008\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">不足：</div></div><div data-block-id=\"97abe761-d77f-46f0-8581-d5bdc273c262\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 100%; margin-top: 2px; margin-bottom: 1px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">实验中对<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">nice</span>以及<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"3\">priority</span>属性的范围未做显式约束</div></div></div></div></div><div data-block-id=\"b50ce218-e3c0-47cc-94af-7295bfecc928\" class=\"notion-selectable notion-bulleted_list-block\" style=\"width: 100%; max-width: 100%; margin-top: 1px; margin-bottom: 0px;\"><div style=\"display: flex; align-items: flex-start; width: 100%; padding-left: 2px; color: inherit; fill: inherit;\"><div style=\"margin-right: 2px; width: 24px; display: flex; align-items: center; justify-content: center; flex-grow: 0; flex-shrink: 0; min-height: calc(1.5em + 3px + 3px);\"><div style=\"font-size: 1.5em; line-height: 1; margin-bottom: 0.1em;\">•</div></div><div style=\"flex: 1 1 0px; min-width: 1px; display: flex; flex-direction: column;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\"List\" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px; text-align: left;\">神奇的bug是，main()中添加<span style=\"font-family:&quot;SFMono-Regular&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;line-height:normal;background:rgba(135,131,120,0.15);color:#EB5757;border-radius:3px;font-size:85%;padding:0.2em 0.4em\" data-token-index=\"1\">task_wait()</span>会提前结束线程，推测调度算法有缺陷，产生于无边界约束，后期修正。（已修正）</div></div></div></div></div></div></div></div><div data-block-id=\"74aa5b6b-5172-4994-8b9d-25b4dec53bd9\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 1px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">若有时间，计划折腾其他调度算法。</div></div></div></div><div data-block-id=\"24d71496-130c-44db-b654-602b855c82cb\" class=\"notion-selectable notion-text-block\" style=\"width: 100%; max-width: 608px; margin-top: 1px; margin-bottom: 0px;\"><div style=\"color: inherit; fill: inherit;\"><div style=\"display: flex;\"><div contenteditable=\"false\" spellcheck=\"true\" placeholder=\" \" data-root=\"true\" class=\"\" style=\"max-width: 100%; width: 100%; white-space: pre-wrap; word-break: break-word; caret-color: rgb(55, 53, 47); padding: 3px 2px;\">感谢：林坤、王凯学长！</div></div></div></div>","slug":"2bcafec576ec4a79b892c9ec55dff1ac"}},"pageContext":{"slug":"2bcafec576ec4a79b892c9ec55dff1ac"}},"staticQueryHashes":["51046549"]}